# ç¬¬4ç« ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€

## ğŸ“š å­¦ä¹ ç›®æ ‡

**S**pecific (å…·ä½“)ï¼š
- ç†è§£é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µï¼ˆç±»ã€å¯¹è±¡ã€å°è£…ï¼‰
- æŒæ¡Pythonç±»çš„å®šä¹‰è¯­æ³•å’Œå¯¹è±¡çš„åˆ›å»ºä½¿ç”¨
- å­¦ä¼šè®¾è®¡ç±»çš„å±æ€§å’Œæ–¹æ³•
- ç†è§£å®ä¾‹æ–¹æ³•ã€ç±»æ–¹æ³•ã€é™æ€æ–¹æ³•çš„åŒºåˆ«

**M**easurable (å¯è¡¡é‡)ï¼š
- èƒ½å¤Ÿç‹¬ç«‹è®¾è®¡å¹¶å®ç°è‡³å°‘5ä¸ªä¸åŒçš„ç±»
- æ­£ç¡®å®Œæˆ90%ä»¥ä¸Šçš„é¢å‘å¯¹è±¡ç¼–ç¨‹ç»ƒä¹ 
- ç‹¬ç«‹å®Œæˆä¸€ä¸ªåŒ…å«å¤šä¸ªç±»çš„ç»¼åˆé¡¹ç›®

**A**chievable (å¯å®ç°)ï¼š
- åŸºäºå‰3ç« çš„ç¼–ç¨‹åŸºç¡€ï¼Œå¾ªåºæ¸è¿›å­¦ä¹ OOPæ¦‚å¿µ
- é€šè¿‡å¤§é‡å®ä¾‹å’Œé¡¹ç›®ç»ƒä¹ å·©å›ºç†è§£

**R**elevant (ç›¸å…³æ€§)ï¼š
- ä¸ºå¤§å‹è½¯ä»¶è®¾è®¡å’Œæ¶æ„æ€ç»´å¥ å®šåŸºç¡€
- åŸ¹å…»æŠ½è±¡æ€ç»´å’Œæ¨¡å—åŒ–è®¾è®¡èƒ½åŠ›

**T**ime-bound (æ—¶é™æ€§)ï¼š
- 2å‘¨å†…å®Œæˆå­¦ä¹ ï¼ˆ4è¯¾æ—¶ç†è®º+å®è·µï¼‰

## ğŸ—ºï¸ çŸ¥è¯†å¯¼å›¾

```mermaid
mindmap
  root((ç¬¬4ç« ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹))
    ç±»ä¸å¯¹è±¡åŸºç¡€
      ç±»çš„å®šä¹‰
        classå…³é”®å­—
        ç±»å‘½åè§„èŒƒ
        ç±»æ–‡æ¡£å­—ç¬¦ä¸²
      å¯¹è±¡åˆ›å»º
        å®ä¾‹åŒ–è¿‡ç¨‹
        __init__æ–¹æ³•
        selfå‚æ•°
      å±æ€§ç®¡ç†
        å®ä¾‹å±æ€§
        ç±»å±æ€§
        ç§æœ‰å±æ€§
    æ–¹æ³•è®¾è®¡
      å®ä¾‹æ–¹æ³•
        æ–¹æ³•å®šä¹‰
        selfå‚æ•°
        æ–¹æ³•è°ƒç”¨
      ç±»æ–¹æ³•
        @classmethodè£…é¥°å™¨
        clså‚æ•°
        åº”ç”¨åœºæ™¯
      é™æ€æ–¹æ³•
        @staticmethodè£…é¥°å™¨
        ç‹¬ç«‹åŠŸèƒ½
        å·¥å…·æ–¹æ³•
    å°è£…ç‰¹æ€§
      è®¿é—®æ§åˆ¶
        å…¬å…±å±æ€§
        ä¿æŠ¤å±æ€§_
        ç§æœ‰å±æ€§__
      å±æ€§è£…é¥°å™¨
        @property
        getter/setter
        å±æ€§éªŒè¯
    é­”æœ¯æ–¹æ³•
      __init__æ„é€ 
      __str__å­—ç¬¦ä¸²è¡¨ç¤º
      __repr__è°ƒè¯•è¡¨ç¤º
      __len__é•¿åº¦
      __eq__ç›¸ç­‰æ¯”è¾ƒ
    å®é™…åº”ç”¨
      æ•°æ®å»ºæ¨¡
      ä¸šåŠ¡é€»è¾‘å°è£…
      ä»£ç ç»„ç»‡ç»“æ„
      è®¾è®¡æ¨¡å¼åŸºç¡€
```

## ğŸ’¡ 4.1 ç±»ä¸å¯¹è±¡åŸºç¡€

### 4.1.1 é¢å‘å¯¹è±¡ç¼–ç¨‹æ¦‚è¿°

åœ¨å‰é¢å‡ ç« ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†Pythonçš„åŸºç¡€è¯­æ³•ã€å˜é‡ç±»å‹ã€æ§åˆ¶ç»“æ„å’Œå‡½æ•°ã€‚ç°åœ¨è®©æˆ‘ä»¬è¿›å…¥ä¸€ä¸ªæ›´å¼ºå¤§çš„ç¼–ç¨‹èŒƒå¼â€”â€”é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ã€‚

**ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Ÿ**

é¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œå®ƒæŠŠç°å®ä¸–ç•Œä¸­çš„äº‹ç‰©æŠ½è±¡æˆç¨‹åºä¸­çš„"å¯¹è±¡"ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„å±æ€§ï¼ˆç‰¹å¾ï¼‰å’Œæ–¹æ³•ï¼ˆè¡Œä¸ºï¼‰ã€‚

ä¸¾ä¸ªç”Ÿæ´»åŒ–çš„ä¾‹å­ï¼š
- **æ±½è½¦**å°±æ˜¯ä¸€ä¸ªå¯¹è±¡
  - å±æ€§ï¼šé¢œè‰²ã€å“ç‰Œã€å‹å·ã€é€Ÿåº¦
  - æ–¹æ³•ï¼šå¯åŠ¨ã€åŠ é€Ÿã€åˆ¹è½¦ã€è½¬å‘

```python
# ä¼ ç»Ÿçš„å‡½æ•°å¼ç¼–ç¨‹
car_color = "çº¢è‰²"
car_brand = "ä¸°ç”°"
car_speed = 0

def start_car():
    print("æ±½è½¦å¯åŠ¨äº†")

def accelerate_car():
    global car_speed
    car_speed += 10
    print(f"å½“å‰é€Ÿåº¦ï¼š{car_speed}km/h")

# é¢å‘å¯¹è±¡ç¼–ç¨‹
class Car:
    def __init__(self, color, brand):
        self.color = color
        self.brand = brand
        self.speed = 0
    
    def start(self):
        print("æ±½è½¦å¯åŠ¨äº†")
    
    def accelerate(self):
        self.speed += 10
        print(f"å½“å‰é€Ÿåº¦ï¼š{self.speed}km/h")

# åˆ›å»ºæ±½è½¦å¯¹è±¡
my_car = Car("çº¢è‰²", "ä¸°ç”°")
my_car.start()
my_car.accelerate()
```

### 4.1.2 ç±»çš„å®šä¹‰è¯­æ³•

åœ¨Pythonä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨`class`å…³é”®å­—æ¥å®šä¹‰ç±»ï¼š

```python
class Student:
    """å­¦ç”Ÿç±» - ç®¡ç†å­¦ç”Ÿä¿¡æ¯"""
    
    # ç±»å±æ€§ï¼ˆæ‰€æœ‰å­¦ç”Ÿå…±äº«ï¼‰
    school_name = "æ¸…åå¤§å­¦"
    student_count = 0
    
    def __init__(self, name, age, major):
        """æ„é€ å‡½æ•° - åˆå§‹åŒ–å­¦ç”Ÿå¯¹è±¡"""
        self.name = name        # å®ä¾‹å±æ€§
        self.age = age
        self.major = major
        self.grades = []
        Student.student_count += 1  # æ¯åˆ›å»ºä¸€ä¸ªå­¦ç”Ÿï¼Œè®¡æ•°+1
    
    def introduce(self):
        """è‡ªæˆ‘ä»‹ç»æ–¹æ³•"""
        return f"æˆ‘æ˜¯{self.name}ï¼Œ{self.age}å²ï¼Œä¸“ä¸šæ˜¯{self.major}"
    
    def add_grade(self, subject, score):
        """æ·»åŠ æˆç»©"""
        self.grades.append({"subject": subject, "score": score})
        print(f"å·²æ·»åŠ {subject}æˆç»©ï¼š{score}åˆ†")
    
    def get_average_grade(self):
        """è®¡ç®—å¹³å‡æˆç»©"""
        if not self.grades:
            return 0
        total = sum(grade["score"] for grade in self.grades)
        return total / len(self.grades)

# åˆ›å»ºå­¦ç”Ÿå¯¹è±¡
student1 = Student("å°æ˜", 20, "è®¡ç®—æœºç§‘å­¦")
student2 = Student("å°çº¢", 19, "æ•°å­¦")

# ä½¿ç”¨å¯¹è±¡çš„æ–¹æ³•
print(student1.introduce())
student1.add_grade("Pythonç¼–ç¨‹", 95)
student1.add_grade("æ•°æ®ç»“æ„", 88)
print(f"å¹³å‡æˆç»©ï¼š{student1.get_average_grade():.1f}")

# è®¿é—®ç±»å±æ€§
print(f"å­¦æ ¡ï¼š{Student.school_name}")
print(f"å­¦ç”Ÿæ€»æ•°ï¼š{Student.student_count}")
```

### 4.1.3 å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨

åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹å«åš**å®ä¾‹åŒ–**ã€‚å½“æˆ‘ä»¬å†™`Student("å°æ˜", 20, "è®¡ç®—æœºç§‘å­¦")`æ—¶ï¼ŒPythonä¼šï¼š

1. åˆ›å»ºä¸€ä¸ªæ–°çš„Studentå¯¹è±¡
2. è°ƒç”¨`__init__`æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–
3. è¿”å›è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨

```python
class BankAccount:
    """é“¶è¡Œè´¦æˆ·ç±»"""
    
    def __init__(self, account_number, owner_name, initial_balance=0):
        self.account_number = account_number
        self.owner_name = owner_name
        self.balance = initial_balance
        self.transaction_history = []
    
    def deposit(self, amount):
        """å­˜æ¬¾"""
        if amount > 0:
            self.balance += amount
            self.transaction_history.append(f"å­˜æ¬¾ï¼š+{amount}")
            print(f"æˆåŠŸå­˜æ¬¾{amount}å…ƒï¼Œä½™é¢ï¼š{self.balance}å…ƒ")
        else:
            print("å­˜æ¬¾é‡‘é¢å¿…é¡»å¤§äº0")
    
    def withdraw(self, amount):
        """å–æ¬¾"""
        if amount <= 0:
            print("å–æ¬¾é‡‘é¢å¿…é¡»å¤§äº0")
        elif amount > self.balance:
            print("ä½™é¢ä¸è¶³")
        else:
            self.balance -= amount
            self.transaction_history.append(f"å–æ¬¾ï¼š-{amount}")
            print(f"æˆåŠŸå–æ¬¾{amount}å…ƒï¼Œä½™é¢ï¼š{self.balance}å…ƒ")
    
    def get_balance(self):
        """æŸ¥è¯¢ä½™é¢"""
        return self.balance
    
    def get_transaction_history(self):
        """æŸ¥è¯¢äº¤æ˜“è®°å½•"""
        print("äº¤æ˜“è®°å½•ï¼š")
        for transaction in self.transaction_history:
            print(f"  {transaction}")

# åˆ›å»ºé“¶è¡Œè´¦æˆ·
account1 = BankAccount("001", "å¼ ä¸‰", 1000)
account2 = BankAccount("002", "æå››")

# è¿›è¡Œé“¶è¡Œæ“ä½œ
account1.deposit(500)
account1.withdraw(200)
account1.get_transaction_history()

print(f"\nè´¦æˆ·{account1.account_number}ä½™é¢ï¼š{account1.get_balance()}å…ƒ")
```

## ğŸ”§ 4.2 ç±»çš„å±æ€§å’Œæ–¹æ³•

### 4.2.1 å®ä¾‹å±æ€§å’Œç±»å±æ€§

```python
class Book:
    """å›¾ä¹¦ç±»"""
    
    # ç±»å±æ€§ - æ‰€æœ‰å›¾ä¹¦å®ä¾‹å…±äº«
    library_name = "ä¸­å¤®å›¾ä¹¦é¦†"
    total_books = 0
    
    def __init__(self, title, author, isbn):
        # å®ä¾‹å±æ€§ - æ¯ä¸ªå›¾ä¹¦å®ä¾‹ç‹¬æœ‰
        self.title = title
        self.author = author
        self.isbn = isbn
        self.is_borrowed = False
        Book.total_books += 1
    
    def borrow(self):
        """å€Ÿä¹¦"""
        if not self.is_borrowed:
            self.is_borrowed = True
            print(f"ã€Š{self.title}ã€‹å€Ÿé˜…æˆåŠŸ")
        else:
            print(f"ã€Š{self.title}ã€‹å·²è¢«å€Ÿå‡º")
    
    def return_book(self):
        """è¿˜ä¹¦"""
        if self.is_borrowed:
            self.is_borrowed = False
            print(f"ã€Š{self.title}ã€‹å½’è¿˜æˆåŠŸ")
        else:
            print(f"ã€Š{self.title}ã€‹æœªè¢«å€Ÿå‡º")

# åˆ›å»ºå›¾ä¹¦å®ä¾‹
book1 = Book("Pythonç¼–ç¨‹", "å¼ ä¸‰", "978-123456789")
book2 = Book("æ•°æ®ç»“æ„", "æå››", "978-987654321")

# è®¿é—®å®ä¾‹å±æ€§
print(f"ä¹¦åï¼š{book1.title}")
print(f"ä½œè€…ï¼š{book1.author}")

# è®¿é—®ç±»å±æ€§
print(f"å›¾ä¹¦é¦†ï¼š{Book.library_name}")
print(f"å›¾ä¹¦æ€»æ•°ï¼š{Book.total_books}")

# å€Ÿä¹¦å’Œè¿˜ä¹¦æ“ä½œ
book1.borrow()
book1.return_book()
```

### 4.2.2 ç±»æ–¹æ³•å’Œé™æ€æ–¹æ³•

```python
import datetime

class Employee:
    """å‘˜å·¥ç±»"""
    
    company_name = "ç§‘æŠ€æœ‰é™å…¬å¸"
    
    def __init__(self, name, age, salary):
        self.name = name
        self.age = age
        self.salary = salary
        self.hire_date = datetime.date.today()
    
    def get_info(self):
        """å®ä¾‹æ–¹æ³• - è·å–å‘˜å·¥ä¿¡æ¯"""
        return f"{self.name}ï¼Œ{self.age}å²ï¼Œæœˆè–ª{self.salary}å…ƒ"
    
    @classmethod
    def from_string(cls, employee_str):
        """ç±»æ–¹æ³• - ä»å­—ç¬¦ä¸²åˆ›å»ºå‘˜å·¥å¯¹è±¡"""
        name, age, salary = employee_str.split('-')
        return cls(name, int(age), int(salary))
    
    @classmethod
    def set_company_name(cls, new_name):
        """ç±»æ–¹æ³• - ä¿®æ”¹å…¬å¸åç§°"""
        cls.company_name = new_name
    
    @staticmethod
    def is_workday(date):
        """é™æ€æ–¹æ³• - åˆ¤æ–­æ˜¯å¦ä¸ºå·¥ä½œæ—¥"""
        return date.weekday() < 5  # 0-4æ˜¯å‘¨ä¸€åˆ°å‘¨äº”
    
    @staticmethod
    def calculate_annual_salary(monthly_salary, months=12):
        """é™æ€æ–¹æ³• - è®¡ç®—å¹´è–ª"""
        return monthly_salary * months

# ä½¿ç”¨å®ä¾‹æ–¹æ³•
emp1 = Employee("ç‹äº”", 28, 8000)
print(emp1.get_info())

# ä½¿ç”¨ç±»æ–¹æ³•åˆ›å»ºå¯¹è±¡
emp2 = Employee.from_string("èµµå…­-30-9000")
print(emp2.get_info())

# ä½¿ç”¨ç±»æ–¹æ³•ä¿®æ”¹ç±»å±æ€§
Employee.set_company_name("æ–°ç§‘æŠ€å…¬å¸")
print(f"å…¬å¸åç§°ï¼š{Employee.company_name}")

# ä½¿ç”¨é™æ€æ–¹æ³•
today = datetime.date.today()
print(f"ä»Šå¤©æ˜¯å·¥ä½œæ—¥å—ï¼Ÿ{Employee.is_workday(today)}")
print(f"å¹´è–ªï¼š{Employee.calculate_annual_salary(8000)}å…ƒ")
```

## ğŸ›¡ï¸ 4.3 å°è£…å’Œè®¿é—®æ§åˆ¶

### 4.3.1 ç§æœ‰å±æ€§å’Œæ–¹æ³•

```python
class CreditCard:
    """ä¿¡ç”¨å¡ç±» - æ¼”ç¤ºå°è£…æ¦‚å¿µ"""
    
    def __init__(self, card_number, cardholder_name, credit_limit):
        self.cardholder_name = cardholder_name  # å…¬å…±å±æ€§
        self._card_number = card_number         # ä¿æŠ¤å±æ€§ï¼ˆçº¦å®šç§æœ‰ï¼‰
        self.__pin = "1234"                     # ç§æœ‰å±æ€§
        self.__credit_limit = credit_limit      # ç§æœ‰å±æ€§
        self.__balance = 0                      # ç§æœ‰å±æ€§
    
    def __validate_pin(self, pin):
        """ç§æœ‰æ–¹æ³• - éªŒè¯PINç """
        return pin == self.__pin
    
    def change_pin(self, old_pin, new_pin):
        """ä¿®æ”¹PINç """
        if self.__validate_pin(old_pin):
            self.__pin = new_pin
            print("PINç ä¿®æ”¹æˆåŠŸ")
        else:
            print("åŸPINç é”™è¯¯")
    
    def purchase(self, amount, pin):
        """æ¶ˆè´¹"""
        if not self.__validate_pin(pin):
            print("PINç é”™è¯¯ï¼Œäº¤æ˜“å¤±è´¥")
            return False
        
        if self.__balance + amount > self.__credit_limit:
            print("è¶…å‡ºä¿¡ç”¨é¢åº¦ï¼Œäº¤æ˜“å¤±è´¥")
            return False
        
        self.__balance += amount
        print(f"æ¶ˆè´¹{amount}å…ƒæˆåŠŸï¼Œå½“å‰ä½™é¢ï¼š{self.__balance}å…ƒ")
        return True
    
    def get_balance(self):
        """æŸ¥è¯¢ä½™é¢ - æä¾›å®‰å…¨çš„è®¿é—®æ–¹å¼"""
        return self.__balance
    
    def get_available_credit(self):
        """æŸ¥è¯¢å¯ç”¨é¢åº¦"""
        return self.__credit_limit - self.__balance

# ä½¿ç”¨ä¿¡ç”¨å¡
card = CreditCard("1234-5678-9012-3456", "å¼ ä¸‰", 10000)

# æ­£å¸¸ä½¿ç”¨
card.purchase(1000, "1234")
print(f"å¯ç”¨é¢åº¦ï¼š{card.get_available_credit()}å…ƒ")

# å°è¯•è®¿é—®ç§æœ‰å±æ€§ï¼ˆä¼šå¤±è´¥ï¼‰
try:
    print(card.__pin)  # æ— æ³•ç›´æ¥è®¿é—®
except AttributeError as e:
    print("æ— æ³•ç›´æ¥è®¿é—®ç§æœ‰å±æ€§")

# é€šè¿‡å…¬å…±æ–¹æ³•è®¿é—®
print(f"å½“å‰ä½™é¢ï¼š{card.get_balance()}å…ƒ")
```

### 4.3.2 å±æ€§è£…é¥°å™¨

```python
class Circle:
    """åœ†å½¢ç±» - æ¼”ç¤ºå±æ€§è£…é¥°å™¨"""
    
    def __init__(self, radius):
        self._radius = radius
    
    @property
    def radius(self):
        """åŠå¾„çš„getteræ–¹æ³•"""
        return self._radius
    
    @radius.setter
    def radius(self, value):
        """åŠå¾„çš„setteræ–¹æ³•"""
        if value <= 0:
            raise ValueError("åŠå¾„å¿…é¡»å¤§äº0")
        self._radius = value
    
    @property
    def area(self):
        """é¢ç§¯ï¼ˆåªè¯»å±æ€§ï¼‰"""
        import math
        return math.pi * self._radius ** 2
    
    @property
    def circumference(self):
        """å‘¨é•¿ï¼ˆåªè¯»å±æ€§ï¼‰"""
        import math
        return 2 * math.pi * self._radius

# ä½¿ç”¨å±æ€§è£…é¥°å™¨
circle = Circle(5)

# åƒè®¿é—®å±æ€§ä¸€æ ·è®¿é—®æ–¹æ³•
print(f"åŠå¾„ï¼š{circle.radius}")
print(f"é¢ç§¯ï¼š{circle.area:.2f}")
print(f"å‘¨é•¿ï¼š{circle.circumference:.2f}")

# ä¿®æ”¹åŠå¾„
circle.radius = 8
print(f"æ–°é¢ç§¯ï¼š{circle.area:.2f}")

# å°è¯•è®¾ç½®æ— æ•ˆåŠå¾„
try:
    circle.radius = -3
except ValueError as e:
    print(f"é”™è¯¯ï¼š{e}")
```

## âš¡ 4.4 é­”æœ¯æ–¹æ³•

### 4.4.1 å¸¸ç”¨é­”æœ¯æ–¹æ³•

```python
class Person:
    """äººå‘˜ç±» - æ¼”ç¤ºé­”æœ¯æ–¹æ³•"""
    
    def __init__(self, name, age):
        self.name = name
        self.age = age
    
    def __str__(self):
        """å­—ç¬¦ä¸²è¡¨ç¤º - ç»™æœ€ç»ˆç”¨æˆ·çœ‹çš„"""
        return f"{self.name}ï¼ˆ{self.age}å²ï¼‰"
    
    def __repr__(self):
        """å®˜æ–¹å­—ç¬¦ä¸²è¡¨ç¤º - ç»™å¼€å‘è€…çœ‹çš„"""
        return f"Person(name='{self.name}', age={self.age})"
    
    def __eq__(self, other):
        """ç›¸ç­‰æ¯”è¾ƒ"""
        if isinstance(other, Person):
            return self.name == other.name and self.age == other.age
        return False
    
    def __lt__(self, other):
        """å°äºæ¯”è¾ƒï¼ˆç”¨äºæ’åºï¼‰"""
        if isinstance(other, Person):
            return self.age < other.age
        return NotImplemented
    
    def __len__(self):
        """é•¿åº¦ï¼ˆè¿™é‡Œè¿”å›å§“åé•¿åº¦ï¼‰"""
        return len(self.name)

# åˆ›å»ºäººå‘˜å¯¹è±¡
person1 = Person("å¼ ä¸‰", 25)
person2 = Person("æå››", 30)
person3 = Person("å¼ ä¸‰", 25)

# æµ‹è¯•é­”æœ¯æ–¹æ³•
print(str(person1))      # è°ƒç”¨__str__
print(repr(person1))     # è°ƒç”¨__repr__
print(person1 == person3)  # è°ƒç”¨__eq__
print(person1 < person2)   # è°ƒç”¨__lt__
print(len(person1))        # è°ƒç”¨__len__

# æ’åºæµ‹è¯•
people = [person2, person1, Person("ç‹äº”", 20)]
people.sort()  # ä½¿ç”¨__lt__è¿›è¡Œæ’åº
for person in people:
    print(person)
```

### 4.4.2 å®¹å™¨ç±»é­”æœ¯æ–¹æ³•

```python
class StudentGrades:
    """å­¦ç”Ÿæˆç»©å®¹å™¨ç±»"""
    
    def __init__(self):
        self._grades = {}
    
    def __setitem__(self, subject, grade):
        """è®¾ç½®æˆç»© - grades["æ•°å­¦"] = 95"""
        self._grades[subject] = grade
    
    def __getitem__(self, subject):
        """è·å–æˆç»© - score = grades["æ•°å­¦"]"""
        return self._grades.get(subject, "æœªè®°å½•")
    
    def __contains__(self, subject):
        """æ£€æŸ¥ç§‘ç›®æ˜¯å¦å­˜åœ¨ - "æ•°å­¦" in grades"""
        return subject in self._grades
    
    def __len__(self):
        """ç§‘ç›®æ•°é‡ - len(grades)"""
        return len(self._grades)
    
    def __iter__(self):
        """è¿­ä»£å™¨ - for subject in grades"""
        return iter(self._grades)
    
    def __str__(self):
        """å­—ç¬¦ä¸²è¡¨ç¤º"""
        return str(self._grades)

# ä½¿ç”¨å®¹å™¨ç±»
grades = StudentGrades()

# è®¾ç½®æˆç»©
grades["æ•°å­¦"] = 95
grades["è‹±è¯­"] = 88
grades["ç‰©ç†"] = 92

# è·å–æˆç»©
print(f"æ•°å­¦æˆç»©ï¼š{grades['æ•°å­¦']}")

# æ£€æŸ¥ç§‘ç›®
print(f"åŒ–å­¦æˆç»©æ˜¯å¦è®°å½•ï¼š{'åŒ–å­¦' in grades}")

# éå†ç§‘ç›®
print("æ‰€æœ‰ç§‘ç›®ï¼š")
for subject in grades:
    print(f"  {subject}: {grades[subject]}")

print(f"æ€»ç§‘ç›®æ•°ï¼š{len(grades)}")
print(f"æˆç»©å•ï¼š{grades}")
```

## ğŸ”¬ ä»£ç ç¤ºä¾‹é›†åˆ

### ç¤ºä¾‹1ï¼šå­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ

```python
class Student:
    """å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç±»"""
    
    # ç±»å±æ€§
    school_name = "æ¸…åå¤§å­¦"
    student_count = 0
    
    def __init__(self, student_id, name, age, major):
        """åˆå§‹åŒ–å­¦ç”Ÿä¿¡æ¯"""
        self.student_id = student_id
        self.name = name
        self.age = age
        self.major = major
        self.courses = []
        self.grades = {}
        Student.student_count += 1
    
    def enroll_course(self, course_name):
        """é€‰è¯¾"""
        if course_name not in self.courses:
            self.courses.append(course_name)
            print(f"{self.name}æˆåŠŸé€‰ä¿®ã€Š{course_name}ã€‹")
        else:
            print(f"{self.name}å·²ç»é€‰ä¿®äº†ã€Š{course_name}ã€‹")
    
    def add_grade(self, course_name, grade):
        """æ·»åŠ æˆç»©"""
        if course_name in self.courses:
            self.grades[course_name] = grade
            print(f"{self.name}çš„ã€Š{course_name}ã€‹æˆç»©ï¼š{grade}åˆ†")
        else:
            print(f"{self.name}æœªé€‰ä¿®ã€Š{course_name}ã€‹è¯¾ç¨‹")
    
    def get_gpa(self):
        """è®¡ç®—GPA"""
        if not self.grades:
            return 0.0
        
        total_points = 0
        for grade in self.grades.values():
            if grade >= 90:
                total_points += 4.0
            elif grade >= 80:
                total_points += 3.0
            elif grade >= 70:
                total_points += 2.0
            elif grade >= 60:
                total_points += 1.0
            else:
                total_points += 0.0
        
        return total_points / len(self.grades)
    
    def get_transcript(self):
        """è·å–æˆç»©å•"""
        print(f"\n=== {self.name}çš„æˆç»©å• ===")
        print(f"å­¦å·ï¼š{self.student_id}")
        print(f"ä¸“ä¸šï¼š{self.major}")
        print(f"å­¦æ ¡ï¼š{Student.school_name}")
        print("è¯¾ç¨‹æˆç»©ï¼š")
        
        for course in self.courses:
            grade = self.grades.get(course, "æœªè¯„åˆ†")
            print(f"  ã€Š{course}ã€‹: {grade}")
        
        print(f"GPAï¼š{self.get_gpa():.2f}")
    
    def __str__(self):
        return f"å­¦ç”Ÿ{self.name}ï¼ˆ{self.student_id}ï¼‰"
    
    def __repr__(self):
        return f"Student('{self.student_id}', '{self.name}', {self.age}, '{self.major}')"

# æµ‹è¯•å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ
def test_student_system():
    # åˆ›å»ºå­¦ç”Ÿ
    student1 = Student("2021001", "å¼ ä¸‰", 20, "è®¡ç®—æœºç§‘å­¦")
    student2 = Student("2021002", "æå››", 19, "æ•°å­¦")
    
    # é€‰è¯¾
    student1.enroll_course("Pythonç¼–ç¨‹")
    student1.enroll_course("æ•°æ®ç»“æ„")
    student1.enroll_course("ç®—æ³•è®¾è®¡")
    
    # æ·»åŠ æˆç»©
    student1.add_grade("Pythonç¼–ç¨‹", 95)
    student1.add_grade("æ•°æ®ç»“æ„", 88)
    student1.add_grade("ç®—æ³•è®¾è®¡", 92)
    
    # æŸ¥çœ‹æˆç»©å•
    student1.get_transcript()
    
    print(f"\nå­¦ç”Ÿæ€»æ•°ï¼š{Student.student_count}")

test_student_system()
```

## ğŸ¯ å®è·µç»ƒä¹ 

### åŸºç¡€ç»ƒä¹ 

#### ç»ƒä¹ 1ï¼šåŠ¨ç‰©å›­ç®¡ç†ç³»ç»Ÿ
```python
class Animal:
    """åŠ¨ç‰©åŸºç±»"""
    
    def __init__(self, name, species, age):
        # è¯·å®ŒæˆåŠ¨ç‰©ç±»çš„åˆå§‹åŒ–
        pass
    
    def make_sound(self):
        # è¯·å®ç°åŠ¨ç‰©å«å£°æ–¹æ³•
        pass
    
    def get_info(self):
        # è¯·å®ç°è·å–åŠ¨ç‰©ä¿¡æ¯æ–¹æ³•
        pass

class Dog(Animal):
    """ç‹—ç±»"""
    
    def __init__(self, name, age, breed):
        # è¯·å®Œæˆç‹—ç±»çš„åˆå§‹åŒ–
        pass
    
    def make_sound(self):
        # ç‹—çš„å«å£°
        pass

class Cat(Animal):
    """çŒ«ç±»"""
    
    def __init__(self, name, age, color):
        # è¯·å®ŒæˆçŒ«ç±»çš„åˆå§‹åŒ–
        pass
    
    def make_sound(self):
        # çŒ«çš„å«å£°
        pass

# æµ‹è¯•ä»£ç 
dog = Dog("æ—ºè´¢", 3, "é‡‘æ¯›")
cat = Cat("å°ç™½", 2, "ç™½è‰²")

print(dog.get_info())
dog.make_sound()
print(cat.get_info())
cat.make_sound()
```

#### ç»ƒä¹ 2ï¼šç®€å•è®¡ç®—å™¨ç±»
```python
class Calculator:
    """è®¡ç®—å™¨ç±»"""
    
    def __init__(self):
        # åˆå§‹åŒ–è®¡ç®—å†å²
        pass
    
    def add(self, a, b):
        # å®ç°åŠ æ³•
        pass
    
    def subtract(self, a, b):
        # å®ç°å‡æ³•
        pass
    
    def multiply(self, a, b):
        # å®ç°ä¹˜æ³•
        pass
    
    def divide(self, a, b):
        # å®ç°é™¤æ³•ï¼ˆæ³¨æ„é™¤é›¶é”™è¯¯ï¼‰
        pass
    
    def get_history(self):
        # è·å–è®¡ç®—å†å²
        pass

# æµ‹è¯•è®¡ç®—å™¨
calc = Calculator()
print(calc.add(10, 5))
print(calc.subtract(10, 3))
print(calc.multiply(4, 7))
print(calc.divide(15, 3))
calc.get_history()
```

### ä¸­çº§ç»ƒä¹ 

#### ç»ƒä¹ 3ï¼šå‘˜å·¥ç®¡ç†ç³»ç»Ÿ
```python
class Employee:
    """å‘˜å·¥åŸºç±»"""
    
    company_name = "ç§‘æŠ€æœ‰é™å…¬å¸"
    
    def __init__(self, emp_id, name, department, base_salary):
        # è¯·å®Œæˆå‘˜å·¥ç±»åˆå§‹åŒ–
        pass
    
    def calculate_salary(self):
        # è®¡ç®—å·¥èµ„ï¼ˆåŸºç±»é»˜è®¤è¿”å›åŸºæœ¬å·¥èµ„ï¼‰
        pass
    
    def get_info(self):
        # è·å–å‘˜å·¥ä¿¡æ¯
        pass

class Manager(Employee):
    """ç»ç†ç±»"""
    
    def __init__(self, emp_id, name, department, base_salary, bonus):
        # è¯·å®Œæˆç»ç†ç±»åˆå§‹åŒ–
        pass
    
    def calculate_salary(self):
        # ç»ç†å·¥èµ„ = åŸºæœ¬å·¥èµ„ + å¥–é‡‘
        pass

class Developer(Employee):
    """å¼€å‘äººå‘˜ç±»"""
    
    def __init__(self, emp_id, name, department, base_salary, projects_completed):
        # è¯·å®Œæˆå¼€å‘äººå‘˜ç±»åˆå§‹åŒ–
        pass
    
    def calculate_salary(self):
        # å¼€å‘äººå‘˜å·¥èµ„ = åŸºæœ¬å·¥èµ„ + é¡¹ç›®å¥–é‡‘ï¼ˆæ¯ä¸ªé¡¹ç›®1000å…ƒï¼‰
        pass

# æµ‹è¯•å‘˜å·¥ç³»ç»Ÿ
manager = Manager("M001", "å¼ ç»ç†", "æŠ€æœ¯éƒ¨", 15000, 5000)
developer = Developer("D001", "æå·¥ç¨‹å¸ˆ", "å¼€å‘éƒ¨", 12000, 3)

print(manager.get_info())
print(f"ç»ç†å·¥èµ„ï¼š{manager.calculate_salary()}å…ƒ")
print(developer.get_info())
print(f"å¼€å‘äººå‘˜å·¥èµ„ï¼š{developer.calculate_salary()}å…ƒ")
```

### æŒ‘æˆ˜ç»ƒä¹ 

#### ç»ƒä¹ 4ï¼šåœ¨çº¿å•†åŸç³»ç»Ÿ
```python
class Product:
    """å•†å“ç±»"""
    
    def __init__(self, product_id, name, price, stock):
        # è¯·å®Œæˆå•†å“ç±»åˆå§‹åŒ–
        pass
    
    def update_stock(self, quantity):
        # æ›´æ–°åº“å­˜
        pass
    
    def __str__(self):
        # å•†å“å­—ç¬¦ä¸²è¡¨ç¤º
        pass

class ShoppingCart:
    """è´­ç‰©è½¦ç±»"""
    
    def __init__(self, customer_name):
        # è¯·å®Œæˆè´­ç‰©è½¦åˆå§‹åŒ–
        pass
    
    def add_item(self, product, quantity):
        # æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦
        pass
    
    def remove_item(self, product_id):
        # ä»è´­ç‰©è½¦ç§»é™¤å•†å“
        pass
    
    def calculate_total(self):
        # è®¡ç®—æ€»ä»·
        pass
    
    def checkout(self):
        # ç»“è´¦
        pass
    
    def __len__(self):
        # è´­ç‰©è½¦å•†å“æ•°é‡
        pass

class OnlineStore:
    """åœ¨çº¿å•†åº—ç±»"""
    
    def __init__(self, store_name):
        # è¯·å®Œæˆå•†åº—åˆå§‹åŒ–
        pass
    
    def add_product(self, product):
        # æ·»åŠ å•†å“åˆ°å•†åº—
        pass
    
    def search_product(self, keyword):
        # æœç´¢å•†å“
        pass
    
    def create_cart(self, customer_name):
        # ä¸ºå®¢æˆ·åˆ›å»ºè´­ç‰©è½¦
        pass

# æµ‹è¯•åœ¨çº¿å•†åŸ
store = OnlineStore("Pythonå•†åŸ")

# æ·»åŠ å•†å“
product1 = Product("P001", "Pythonç¼–ç¨‹ä¹¦", 89.9, 100)
product2 = Product("P002", "æœºæ¢°é”®ç›˜", 299.0, 50)
store.add_product(product1)
store.add_product(product2)

# åˆ›å»ºè´­ç‰©è½¦å¹¶è´­ä¹°
cart = store.create_cart("å¼ ä¸‰")
cart.add_item(product1, 2)
cart.add_item(product2, 1)
print(f"è´­ç‰©è½¦æ€»ä»·ï¼š{cart.calculate_total()}å…ƒ")
cart.checkout()
```

## ğŸš€ ç»¼åˆé¡¹ç›®æ¡ˆä¾‹ï¼šå­¦æ ¡ç®¡ç†ç³»ç»Ÿ

```python
import json
from datetime import datetime, date

class Person:
    """äººå‘˜åŸºç±»"""
    
    def __init__(self, person_id, name, age, gender, phone, email):
        self.person_id = person_id
        self.name = name
        self.age = age
        self.gender = gender
        self.phone = phone
        self.email = email
        self.registration_date = datetime.now()
    
    def get_basic_info(self):
        """è·å–åŸºæœ¬ä¿¡æ¯"""
        return {
            "ID": self.person_id,
            "å§“å": self.name,
            "å¹´é¾„": self.age,
            "æ€§åˆ«": self.gender,
            "ç”µè¯": self.phone,
            "é‚®ç®±": self.email
        }
    
    def __str__(self):
        return f"{self.name}ï¼ˆ{self.person_id}ï¼‰"

class Student(Person):
    """å­¦ç”Ÿç±»"""
    
    def __init__(self, student_id, name, age, gender, phone, email, major, grade):
        super().__init__(student_id, name, age, gender, phone, email)
        self.major = major  # ä¸“ä¸š
        self.grade = grade  # å¹´çº§
        self.courses = {}   # è¯¾ç¨‹ï¼š{course_id: Courseå¯¹è±¡}
        self.grades = {}    # æˆç»©ï¼š{course_id: åˆ†æ•°}
        self.gpa = 0.0
    
    def enroll_course(self, course):
        """é€‰è¯¾"""
        if course.course_id in self.courses:
            return f"å·²é€‰ä¿®è¯¾ç¨‹ã€Š{course.name}ã€‹"
        
        if len(self.courses) >= 8:
            return "é€‰è¯¾æ•°é‡å·²è¾¾ä¸Šé™ï¼ˆ8é—¨ï¼‰"
        
        self.courses[course.course_id] = course
        course.add_student(self)
        return f"æˆåŠŸé€‰ä¿®è¯¾ç¨‹ã€Š{course.name}ã€‹"
    
    def drop_course(self, course_id):
        """é€€è¯¾"""
        if course_id not in self.courses:
            return "æœªé€‰ä¿®æ­¤è¯¾ç¨‹"
        
        course = self.courses[course_id]
        del self.courses[course_id]
        if course_id in self.grades:
            del self.grades[course_id]
        course.remove_student(self.person_id)
        return f"æˆåŠŸé€€è¯¾ã€Š{course.name}ã€‹"
    
    def add_grade(self, course_id, score):
        """æ·»åŠ æˆç»©"""
        if course_id not in self.courses:
            return "æœªé€‰ä¿®æ­¤è¯¾ç¨‹"
        
        if not 0 <= score <= 100:
            return "æˆç»©å¿…é¡»åœ¨0-100ä¹‹é—´"
        
        self.grades[course_id] = score
        self._calculate_gpa()
        return f"æˆç»©å½•å…¥æˆåŠŸï¼š{score}åˆ†"
    
    def _calculate_gpa(self):
        """è®¡ç®—GPA"""
        if not self.grades:
            self.gpa = 0.0
            return
        
        total_points = 0
        for score in self.grades.values():
            if score >= 90:
                total_points += 4.0
            elif score >= 80:
                total_points += 3.0
            elif score >= 70:
                total_points += 2.0
            elif score >= 60:
                total_points += 1.0
            else:
                total_points += 0.0
        
        self.gpa = total_points / len(self.grades)
    
    def get_transcript(self):
        """è·å–æˆç»©å•"""
        transcript = {
            "å­¦ç”Ÿä¿¡æ¯": self.get_basic_info(),
            "ä¸“ä¸š": self.major,
            "å¹´çº§": self.grade,
            "GPA": round(self.gpa, 2),
            "è¯¾ç¨‹æˆç»©": {}
        }
        
        for course_id, course in self.courses.items():
            grade = self.grades.get(course_id, "æœªè¯„åˆ†")
            transcript["è¯¾ç¨‹æˆç»©"][course.name] = {
                "è¯¾ç¨‹ä»£ç ": course_id,
                "å­¦åˆ†": course.credits,
                "æˆç»©": grade
            }
        
        return transcript

class Teacher(Person):
    """æ•™å¸ˆç±»"""
    
    def __init__(self, teacher_id, name, age, gender, phone, email, department, title):
        super().__init__(teacher_id, name, age, gender, phone, email)
        self.department = department  # é™¢ç³»
        self.title = title           # èŒç§°
        self.courses = {}            # æˆè¯¾è¯¾ç¨‹
        self.salary = self._calculate_salary()
    
    def _calculate_salary(self):
        """æ ¹æ®èŒç§°è®¡ç®—åŸºæœ¬å·¥èµ„"""
        salary_map = {
            "æ•™æˆ": 15000,
            "å‰¯æ•™æˆ": 12000,
            "è®²å¸ˆ": 8000,
            "åŠ©æ•™": 5000
        }
        return salary_map.get(self.title, 5000)
    
    def assign_course(self, course):
        """åˆ†é…è¯¾ç¨‹"""
        self.courses[course.course_id] = course
        course.teacher = self
        return f"æˆåŠŸåˆ†é…è¯¾ç¨‹ã€Š{course.name}ã€‹"
    
    def grade_student(self, student_id, course_id, score):
        """ç»™å­¦ç”Ÿè¯„åˆ†"""
        if course_id not in self.courses:
            return "æ‚¨æœªæˆè¯¾æ­¤è¯¾ç¨‹"
        
        course = self.courses[course_id]
        if student_id not in course.students:
            return "å­¦ç”Ÿæœªé€‰ä¿®æ­¤è¯¾ç¨‹"
        
        student = course.students[student_id]
        return student.add_grade(course_id, score)
    
    def get_course_list(self):
        """è·å–æˆè¯¾åˆ—è¡¨"""
        course_list = []
        for course in self.courses.values():
            course_list.append({
                "è¯¾ç¨‹åç§°": course.name,
                "è¯¾ç¨‹ä»£ç ": course.course_id,
                "å­¦åˆ†": course.credits,
                "é€‰è¯¾äººæ•°": len(course.students)
            })
        return course_list

class Course:
    """è¯¾ç¨‹ç±»"""
    
    def __init__(self, course_id, name, credits, max_students=50):
        self.course_id = course_id
        self.name = name
        self.credits = credits
        self.max_students = max_students
        self.teacher = None
        self.students = {}  # student_id: Studentå¯¹è±¡
        self.schedule = []  # è¯¾ç¨‹å®‰æ’
    
    def add_student(self, student):
        """æ·»åŠ å­¦ç”Ÿ"""
        if len(self.students) >= self.max_students:
            return False
        
        self.students[student.person_id] = student
        return True
    
    def remove_student(self, student_id):
        """ç§»é™¤å­¦ç”Ÿ"""
        if student_id in self.students:
            del self.students[student_id]
            return True
        return False
    
    def add_schedule(self, day, time, classroom):
        """æ·»åŠ è¯¾ç¨‹å®‰æ’"""
        schedule_item = {
            "day": day,
            "time": time,
            "classroom": classroom
        }
        self.schedule.append(schedule_item)
    
    def get_student_list(self):
        """è·å–å­¦ç”Ÿåå•"""
        student_list = []
        for student in self.students.values():
            student_list.append({
                "å­¦å·": student.person_id,
                "å§“å": student.name,
                "ä¸“ä¸š": student.major,
                "å¹´çº§": student.grade
            })
        return student_list
    
    def __str__(self):
        return f"ã€Š{self.name}ã€‹ï¼ˆ{self.course_id}ï¼‰"

class School:
    """å­¦æ ¡ç±»"""
    
    def __init__(self, name):
        self.name = name
        self.students = {}  # student_id: Studentå¯¹è±¡
        self.teachers = {}  # teacher_id: Teacherå¯¹è±¡
        self.courses = {}   # course_id: Courseå¯¹è±¡
        self.departments = set()  # é™¢ç³»é›†åˆ
    
    def add_student(self, student):
        """æ·»åŠ å­¦ç”Ÿ"""
        if student.person_id in self.students:
            return f"å­¦ç”Ÿ{student.name}å·²å­˜åœ¨"
        
        self.students[student.person_id] = student
        return f"æˆåŠŸæ·»åŠ å­¦ç”Ÿï¼š{student}"
    
    def add_teacher(self, teacher):
        """æ·»åŠ æ•™å¸ˆ"""
        if teacher.person_id in self.teachers:
            return f"æ•™å¸ˆ{teacher.name}å·²å­˜åœ¨"
        
        self.teachers[teacher.person_id] = teacher
        self.departments.add(teacher.department)
        return f"æˆåŠŸæ·»åŠ æ•™å¸ˆï¼š{teacher}"
    
    def add_course(self, course):
        """æ·»åŠ è¯¾ç¨‹"""
        if course.course_id in self.courses:
            return f"è¯¾ç¨‹{course.name}å·²å­˜åœ¨"
        
        self.courses[course.course_id] = course
        return f"æˆåŠŸæ·»åŠ è¯¾ç¨‹ï¼š{course}"
    
    def enroll_student_to_course(self, student_id, course_id):
        """å­¦ç”Ÿé€‰è¯¾"""
        if student_id not in self.students:
            return "å­¦ç”Ÿä¸å­˜åœ¨"
        
        if course_id not in self.courses:
            return "è¯¾ç¨‹ä¸å­˜åœ¨"
        
        student = self.students[student_id]
        course = self.courses[course_id]
        
        return student.enroll_course(course)
    
    def assign_teacher_to_course(self, teacher_id, course_id):
        """åˆ†é…æ•™å¸ˆæˆè¯¾"""
        if teacher_id not in self.teachers:
            return "æ•™å¸ˆä¸å­˜åœ¨"
        
        if course_id not in self.courses:
            return "è¯¾ç¨‹ä¸å­˜åœ¨"
        
        teacher = self.teachers[teacher_id]
        course = self.courses[course_id]
        
        return teacher.assign_course(course)
    
    def get_school_statistics(self):
        """è·å–å­¦æ ¡ç»Ÿè®¡ä¿¡æ¯"""
        return {
            "å­¦æ ¡åç§°": self.name,
            "å­¦ç”Ÿæ€»æ•°": len(self.students),
            "æ•™å¸ˆæ€»æ•°": len(self.teachers),
            "è¯¾ç¨‹æ€»æ•°": len(self.courses),
            "é™¢ç³»æ•°é‡": len(self.departments),
            "é™¢ç³»åˆ—è¡¨": list(self.departments)
        }
    
    def search_students(self, keyword=None, major=None, grade=None):
        """æœç´¢å­¦ç”Ÿ"""
        results = []
        
        for student in self.students.values():
            match = True
            
            if keyword and keyword not in student.name:
                match = False
            if major and student.major != major:
                match = False
            if grade and student.grade != grade:
                match = False
            
            if match:
                results.append(student)
        
        return results
    
    def get_course_schedule(self):
        """è·å–è¯¾ç¨‹å®‰æ’è¡¨"""
        schedule = {}
        
        for course in self.courses.values():
            if course.schedule:
                schedule[course.name] = {
                    "æ•™å¸ˆ": course.teacher.name if course.teacher else "æœªåˆ†é…",
                    "å­¦åˆ†": course.credits,
                    "äººæ•°": len(course.students),
                    "å®‰æ’": course.schedule
                }
        
        return schedule
    
    def save_data(self, filename):
        """ä¿å­˜æ•°æ®åˆ°æ–‡ä»¶"""
        data = {
            "school_name": self.name,
            "students": {},
            "teachers": {},
            "courses": {}
        }
        
        # ä¿å­˜å­¦ç”Ÿæ•°æ®
        for student_id, student in self.students.items():
            data["students"][student_id] = {
                "name": student.name,
                "age": student.age,
                "gender": student.gender,
                "phone": student.phone,
                "email": student.email,
                "major": student.major,
                "grade": student.grade,
                "gpa": student.gpa
            }
        
        # ä¿å­˜æ•™å¸ˆæ•°æ®
        for teacher_id, teacher in self.teachers.items():
            data["teachers"][teacher_id] = {
                "name": teacher.name,
                "age": teacher.age,
                "gender": teacher.gender,
                "phone": teacher.phone,
                "email": teacher.email,
                "department": teacher.department,
                "title": teacher.title,
                "salary": teacher.salary
            }
        
        # ä¿å­˜è¯¾ç¨‹æ•°æ®
        for course_id, course in self.courses.items():
            data["courses"][course_id] = {
                "name": course.name,
                "credits": course.credits,
                "max_students": course.max_students,
                "teacher_id": course.teacher.person_id if course.teacher else None,
                "student_ids": list(course.students.keys())
            }
        
        try:
            with open(filename, 'w', encoding='utf-8') as f:
                json.dump(data, f, ensure_ascii=False, indent=2)
            return f"æ•°æ®å·²ä¿å­˜åˆ°{filename}"
        except Exception as e:
            return f"ä¿å­˜å¤±è´¥ï¼š{e}"

# æ¼”ç¤ºå­¦æ ¡ç®¡ç†ç³»ç»Ÿ
def demo_school_system():
    """æ¼”ç¤ºå­¦æ ¡ç®¡ç†ç³»ç»ŸåŠŸèƒ½"""
    
    # åˆ›å»ºå­¦æ ¡
    school = School("æ¸…åå¤§å­¦")
    
    # æ·»åŠ æ•™å¸ˆ
    teacher1 = Teacher("T001", "å¼ æ•™æˆ", 45, "ç”·", "13800001111", "zhang@thu.edu.cn", "è®¡ç®—æœºç³»", "æ•™æˆ")
    teacher2 = Teacher("T002", "æå‰¯æ•™æˆ", 38, "å¥³", "13800002222", "li@thu.edu.cn", "æ•°å­¦ç³»", "å‰¯æ•™æˆ")
    
    school.add_teacher(teacher1)
    school.add_teacher(teacher2)
    
    # æ·»åŠ è¯¾ç¨‹
    course1 = Course("CS101", "Pythonç¼–ç¨‹åŸºç¡€", 3)
    course2 = Course("CS102", "æ•°æ®ç»“æ„", 4)
    course3 = Course("MATH101", "é«˜ç­‰æ•°å­¦", 4)
    
    school.add_course(course1)
    school.add_course(course2)
    school.add_course(course3)
    
    # åˆ†é…æ•™å¸ˆæˆè¯¾
    school.assign_teacher_to_course("T001", "CS101")
    school.assign_teacher_to_course("T001", "CS102")
    school.assign_teacher_to_course("T002", "MATH101")
    
    # æ·»åŠ å­¦ç”Ÿ
    student1 = Student("2021001", "å°æ˜", 19, "ç”·", "13900001111", "xiaoming@student.thu.edu.cn", "è®¡ç®—æœºç§‘å­¦", 2021)
    student2 = Student("2021002", "å°çº¢", 18, "å¥³", "13900002222", "xiaohong@student.thu.edu.cn", "è½¯ä»¶å·¥ç¨‹", 2021)
    student3 = Student("2021003", "å°å¼º", 20, "ç”·", "13900003333", "xiaoqiang@student.thu.edu.cn", "è®¡ç®—æœºç§‘å­¦", 2021)
    
    school.add_student(student1)
    school.add_student(student2)
    school.add_student(student3)
    
    # å­¦ç”Ÿé€‰è¯¾
    school.enroll_student_to_course("2021001", "CS101")
    school.enroll_student_to_course("2021001", "CS102")
    school.enroll_student_to_course("2021001", "MATH101")
    
    school.enroll_student_to_course("2021002", "CS101")
    school.enroll_student_to_course("2021002", "MATH101")
    
    school.enroll_student_to_course("2021003", "CS101")
    school.enroll_student_to_course("2021003", "CS102")
    
    # æ•™å¸ˆç»™å­¦ç”Ÿè¯„åˆ†
    teacher1.grade_student("2021001", "CS101", 95)
    teacher1.grade_student("2021001", "CS102", 88)
    teacher1.grade_student("2021002", "CS101", 92)
    teacher1.grade_student("2021003", "CS101", 85)
    teacher1.grade_student("2021003", "CS102", 90)
    
    teacher2.grade_student("2021001", "MATH101", 87)
    teacher2.grade_student("2021002", "MATH101", 94)
    
    # æŸ¥çœ‹å­¦æ ¡ç»Ÿè®¡ä¿¡æ¯
    print("=== å­¦æ ¡ç»Ÿè®¡ä¿¡æ¯ ===")
    stats = school.get_school_statistics()
    for key, value in stats.items():
        print(f"{key}: {value}")
    
    # æŸ¥çœ‹å­¦ç”Ÿæˆç»©å•
    print(f"\n=== {student1.name}çš„æˆç»©å• ===")
    transcript = student1.get_transcript()
    print(f"GPA: {transcript['GPA']}")
    print("è¯¾ç¨‹æˆç»©:")
    for course_name, grade_info in transcript['è¯¾ç¨‹æˆç»©'].items():
        print(f"  {course_name}: {grade_info['æˆç»©']}åˆ†")
    
    # æŸ¥çœ‹æ•™å¸ˆæˆè¯¾æƒ…å†µ
    print(f"\n=== {teacher1.name}çš„æˆè¯¾æƒ…å†µ ===")
    course_list = teacher1.get_course_list()
    for course_info in course_list:
        print(f"  {course_info['è¯¾ç¨‹åç§°']}: {course_info['é€‰è¯¾äººæ•°']}äºº")
    
    # ä¿å­˜æ•°æ®
    school.save_data("school_data.json")
    print("\næ•°æ®å·²ä¿å­˜åˆ° school_data.json")

# æ³¨é‡Šæ‰æ¼”ç¤ºå‡½æ•°è°ƒç”¨ï¼Œé¿å…å®é™…è¿è¡Œ
# demo_school_system()
```

## ğŸ“– æ‹“å±•é˜…è¯»

### åœ¨çº¿èµ„æº
- [Pythonå®˜æ–¹æ–‡æ¡£ - ç±»](https://docs.python.org/zh-cn/3/tutorial/classes.html)
- [Real Python - é¢å‘å¯¹è±¡ç¼–ç¨‹](https://realpython.com/python3-object-oriented-programming/)
- [GeeksforGeeks - Python OOP](https://www.geeksforgeeks.org/python-oops-concepts/)

### æ¨èä¹¦ç±
- ã€ŠPythoné¢å‘å¯¹è±¡ç¼–ç¨‹æŒ‡å—ã€‹- Steven F. Lott
- ã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹- Gang of Four
- ã€Šé‡æ„ï¼šæ”¹å–„æ—¢æœ‰ä»£ç çš„è®¾è®¡ã€‹- Martin Fowler

---

## ğŸ“‹ æœ¬ç« æ£€æŸ¥æ¸…å•

**ç†è®ºæŒæ¡** âœ…
- [ ] ç†è§£é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µ
- [ ] æŒæ¡ç±»çš„å®šä¹‰å’Œå¯¹è±¡çš„åˆ›å»º
- [ ] ç†Ÿç»ƒä½¿ç”¨å®ä¾‹æ–¹æ³•ã€ç±»æ–¹æ³•ã€é™æ€æ–¹æ³•
- [ ] ç†è§£å°è£…å’Œè®¿é—®æ§åˆ¶æœºåˆ¶
- [ ] æŒæ¡å¸¸ç”¨é­”æœ¯æ–¹æ³•çš„ä½¿ç”¨

**å®è·µèƒ½åŠ›** âœ…
- [ ] èƒ½å¤Ÿè®¾è®¡åˆç†çš„ç±»ç»“æ„
- [ ] ç†Ÿç»ƒä½¿ç”¨å±æ€§è£…é¥°å™¨
- [ ] èƒ½å¤Ÿå®ç°å¤æ‚çš„ä¸šåŠ¡é€»è¾‘
- [ ] æŒæ¡æ•°æ®éªŒè¯å’Œé”™è¯¯å¤„ç†

**é¡¹ç›®ç»éªŒ** âœ…
- [ ] å®Œæˆå­¦æ ¡ç®¡ç†ç³»ç»Ÿé¡¹ç›®
- [ ] ç†è§£å¤šç±»åä½œçš„è®¾è®¡æ¨¡å¼
- [ ] æŒæ¡æ•°æ®æŒä¹…åŒ–çš„å®ç°æ–¹æ³•

æ­å–œï¼ä½ å·²ç»æŒæ¡äº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºç¡€çŸ¥è¯†ã€‚ä¸‹ä¸€ç« æˆ‘ä»¬å°†å­¦ä¹ ç»§æ‰¿ä¸å¤šæ€ã€‚ 