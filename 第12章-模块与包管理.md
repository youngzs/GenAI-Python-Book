# ç¬¬12ç«  æ¨¡å—ä¸åŒ…ç®¡ç†

> **å­¦ä¹ ç›®æ ‡**: æŒæ¡Pythonæ¨¡å—åŒ–ç¼–ç¨‹ï¼Œå­¦ä¼šåˆ›å»ºå¯é‡ç”¨çš„ä»£ç ç»„ä»¶ï¼Œç®¡ç†é¡¹ç›®ä¾èµ–ï¼Œç»„ç»‡å¤§å‹Pythoné¡¹ç›®ç»“æ„ã€‚

## ğŸ¯ æœ¬ç« å¯¼è¯»

æƒ³è±¡ä¸€ä¸‹ä½ æ˜¯ä¸€ä¸ªæ‰‹å·¥è‰ºäººï¼Œæœ‰ä¸€ä¸ªå·¨å¤§çš„å·¥å…·åº“æˆ¿ï¼š
- **å·¥å…·ç®±(æ¨¡å—)**: æ¯ä¸ªå·¥å…·ç®±ä¸“é—¨å­˜æ”¾ç‰¹å®šç±»å‹çš„å·¥å…·ï¼Œæ¯”å¦‚æœ¨å·¥å·¥å…·ç®±ã€ç”µå·¥å·¥å…·ç®±
- **åº“æˆ¿(åŒ…)**: æ•´ä¸ªåº“æˆ¿æŒ‰åŒºåŸŸç»„ç»‡ä¸åŒçš„å·¥å…·ç®±ï¼Œä¾¿äºç®¡ç†å’ŒæŸ¥æ‰¾
- **å·¥å…·ä¾›åº”å•†(åŒ…ç®¡ç†å™¨)**: å½“ä½ éœ€è¦æ–°å·¥å…·æ—¶ï¼Œä¾›åº”å•†å¸®ä½ è·å–å’Œå®‰è£…
- **ç‹¬ç«‹å·¥ä½œé—´(è™šæ‹Ÿç¯å¢ƒ)**: æ¯ä¸ªé¡¹ç›®éƒ½æœ‰ç‹¬ç«‹çš„å·¥ä½œé—´ï¼Œé¿å…å·¥å…·æ··ä¹±

è¿™å°±æ˜¯Pythonæ¨¡å—åŒ–ç¼–ç¨‹çš„ç²¾é«“ï¼š**ç»„ç»‡ä»£ç ã€å¤ç”¨åŠŸèƒ½ã€ç®¡ç†ä¾èµ–ã€éš”ç¦»ç¯å¢ƒ**ã€‚

### ğŸ¨ æœ¬ç« çŸ¥è¯†å›¾è°±

```mermaid
mindmap
  root((æ¨¡å—ä¸åŒ…ç®¡ç†))
    æ¨¡å—ç³»ç»Ÿ
      æ¨¡å—æ¦‚å¿µ
      å¯¼å…¥æœºåˆ¶
      å‘½åç©ºé—´
      æœç´¢è·¯å¾„
    è‡ªå®šä¹‰æ¨¡å—
      æ¨¡å—è®¾è®¡
      åŒ…ç»“æ„
      APIè®¾è®¡
      æ¨¡å—å‘å¸ƒ
    åŒ…ç®¡ç†
      pipå·¥å…·
      è™šæ‹Ÿç¯å¢ƒ
      ä¾èµ–ç®¡ç†
      ç‰ˆæœ¬æ§åˆ¶
    é¡¹ç›®ç»„ç»‡
      ç›®å½•ç»“æ„
      é…ç½®ç®¡ç†
      æœ€ä½³å®è·µ
      å·¥å…·é›†æˆ
```

---

## 12.1 Pythonæ¨¡å—ç³»ç»Ÿè¯¦è§£

### ğŸ“ æ¦‚å¿µç†è§£ï¼šæ¨¡å—å°±åƒä¸“ä¸šå·¥å…·ç®±

æƒ³è±¡ä½ æ˜¯ä¸€ä¸ªå¤šæ‰å¤šè‰ºçš„å·¥åŒ ï¼Œæ‹¥æœ‰å„ç§ä¸“ä¸šå·¥å…·ç®±ï¼š
- **æœ¨å·¥å·¥å…·ç®±**: é”¯å­ã€åˆ¨å­ã€å‡¿å­ç­‰æœ¨å·¥ä¸“ç”¨å·¥å…·
- **ç”µå·¥å·¥å…·ç®±**: ä¸‡ç”¨è¡¨ã€ç”µçº¿é’³ã€èºä¸åˆ€ç­‰ç”µå·¥å·¥å…·
- **æµ‹é‡å·¥å…·ç®±**: å°ºå­ã€é‡è§’å™¨ã€å¡å°ºç­‰æµ‹é‡å·¥å…·

æ¯ä¸ªå·¥å…·ç®±éƒ½æœ‰æ˜ç¡®çš„ç”¨é€”ï¼Œå·¥å…·ä¹‹é—´ç›¸äº’é…åˆã€‚å½“ä½ éœ€è¦åšæœ¨å·¥æ´»æ—¶ï¼Œå°±æ‰“å¼€æœ¨å·¥å·¥å…·ç®±ï¼›éœ€è¦æ¥ç”µçº¿æ—¶ï¼Œå°±ä½¿ç”¨ç”µå·¥å·¥å…·ç®±ã€‚

è¿™å°±æ˜¯Pythonæ¨¡å—çš„æœ¬è´¨ï¼š**å°†ç›¸å…³åŠŸèƒ½ç»„ç»‡åœ¨ä¸€èµ·çš„ä»£ç æ–‡ä»¶**ã€‚

### ğŸ”‘ æ¨¡å—çš„æ ¸å¿ƒæ¦‚å¿µ

#### 1. ä»€ä¹ˆæ˜¯æ¨¡å—
```python
# math_tools.py - è¿™å°±æ˜¯ä¸€ä¸ªæ¨¡å—
"""æ•°å­¦å·¥å…·æ¨¡å— - å°±åƒä¸€ä¸ªæ•°å­¦å·¥å…·ç®±"""

import math

def calculate_area_circle(radius):
    """è®¡ç®—åœ†çš„é¢ç§¯"""
    return math.pi * radius ** 2

def calculate_distance(x1, y1, x2, y2):
    """è®¡ç®—ä¸¤ç‚¹é—´è·ç¦»"""
    return math.sqrt((x2 - x1)**2 + (y2 - y1)**2)

def is_prime(n):
    """åˆ¤æ–­æ˜¯å¦ä¸ºè´¨æ•°"""
    if n < 2:
        return False
    for i in range(2, int(math.sqrt(n)) + 1):
        if n % i == 0:
            return False
    return True

# æ¨¡å—çº§åˆ«çš„å¸¸é‡
PI = 3.14159265359
GOLDEN_RATIO = 1.618033988749

if __name__ == "__main__":
    # å½“ç›´æ¥è¿è¡Œè¿™ä¸ªæ–‡ä»¶æ—¶æ‰§è¡Œçš„ä»£ç 
    print("æ•°å­¦å·¥å…·æ¨¡å—æµ‹è¯•")
    print(f"åœ†é¢ç§¯(åŠå¾„5): {calculate_area_circle(5)}")
    print(f"ä¸¤ç‚¹è·ç¦»: {calculate_distance(0, 0, 3, 4)}")
    print(f"17æ˜¯è´¨æ•°å—: {is_prime(17)}")
```

#### 2. æ¨¡å—vsè„šæœ¬çš„åŒºåˆ«
```python
# script.py - è„šæœ¬æ–‡ä»¶
print("è¿™æ˜¯ä¸€ä¸ªè„šæœ¬ï¼Œç›´æ¥æ‰§è¡Œä»»åŠ¡")
result = 2 + 3
print(f"è®¡ç®—ç»“æœ: {result}")

# module.py - æ¨¡å—æ–‡ä»¶
"""è¿™æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæä¾›å¯é‡ç”¨çš„åŠŸèƒ½"""

def add(a, b):
    """åŠ æ³•å‡½æ•° - å¯ä»¥è¢«å…¶ä»–ç¨‹åºä½¿ç”¨"""
    return a + b

def multiply(a, b):
    """ä¹˜æ³•å‡½æ•° - å¯ä»¥è¢«å…¶ä»–ç¨‹åºä½¿ç”¨"""
    return a * b

# åªæœ‰ç›´æ¥è¿è¡Œæ—¶æ‰æ‰§è¡Œæµ‹è¯•ä»£ç 
if __name__ == "__main__":
    print("æ¨¡å—æµ‹è¯•")
    print(f"2 + 3 = {add(2, 3)}")
    print(f"2 * 3 = {multiply(2, 3)}")
```

### ğŸ“¦ å¯¼å…¥è¯­å¥è¯¦è§£

#### 1. å››ç§å¯¼å…¥æ–¹å¼
```python
# æ–¹å¼1: å¯¼å…¥æ•´ä¸ªæ¨¡å—
import math_tools
area = math_tools.calculate_area_circle(5)
print(f"ä½¿ç”¨æ¨¡å—å.å‡½æ•°å: {area}")

# æ–¹å¼2: å¯¼å…¥ç‰¹å®šå‡½æ•°
from math_tools import calculate_area_circle, is_prime
area = calculate_area_circle(5)
print(f"ç›´æ¥ä½¿ç”¨å‡½æ•°å: {area}")

# æ–¹å¼3: å¯¼å…¥å¹¶é‡å‘½å
import math_tools as mt
area = mt.calculate_area_circle(5)
print(f"ä½¿ç”¨åˆ«å: {area}")

# æ–¹å¼4: å¯¼å…¥æ‰€æœ‰(ä¸æ¨è)
from math_tools import *
area = calculate_area_circle(5)
print(f"å¯¼å…¥æ‰€æœ‰: {area}")
```

#### 2. å¯¼å…¥æ–¹å¼çš„é€‰æ‹©ç­–ç•¥
```python
# æ¨èçš„å¯¼å…¥æ–¹å¼é€‰æ‹©
"""
1. ä½¿ç”¨é¢‘ç‡ä½ï¼ŒåŠŸèƒ½æ˜ç¡® â†’ import module
2. ä½¿ç”¨é¢‘ç‡é«˜ï¼Œå‡½æ•°åä¸å†²çª â†’ from module import function
3. æ¨¡å—åå¤ªé•¿ â†’ import module as alias
4. é¿å…ä½¿ç”¨ from module import * (é™¤éç‰¹æ®Šæƒ…å†µ)
"""

# ç¤ºä¾‹ï¼šä¸åŒåœºæ™¯çš„æœ€ä½³é€‰æ‹©
import os                    # ç³»ç»Ÿæ“ä½œï¼Œä½¿ç”¨é¢‘ç‡ä¸­ç­‰
from datetime import datetime, timedelta  # æ—¥æœŸæ—¶é—´ï¼Œä½¿ç”¨é¢‘ç¹
import numpy as np           # ç§‘å­¦è®¡ç®—ï¼Œåç§°å¤ªé•¿
import matplotlib.pyplot as plt  # ç»˜å›¾åº“ï¼Œçº¦å®šä¿—æˆçš„åˆ«å
```

### ğŸ” æ¨¡å—æœç´¢æœºåˆ¶

#### 1. Pythonå¦‚ä½•æ‰¾åˆ°æ¨¡å—
```python
import sys

def show_module_search_path():
    """æ˜¾ç¤ºPythonæ¨¡å—æœç´¢è·¯å¾„"""
    print("Pythonæ¨¡å—æœç´¢è·¯å¾„ (sys.path):")
    for i, path in enumerate(sys.path, 1):
        print(f"{i:2d}. {path}")

# æŸ¥çœ‹å½“å‰æœç´¢è·¯å¾„
show_module_search_path()

# åŠ¨æ€æ·»åŠ æœç´¢è·¯å¾„
sys.path.append("/path/to/my/modules")
print(f"\næ·»åŠ è·¯å¾„å: {len(sys.path)} ä¸ªæœç´¢è·¯å¾„")
```

#### 2. æ¨¡å—æœç´¢é¡ºåº
```python
"""
PythonæŒ‰ä»¥ä¸‹é¡ºåºæœç´¢æ¨¡å—:
1. å†…ç½®æ¨¡å— (built-in modules)
2. å½“å‰å·¥ä½œç›®å½•
3. PYTHONPATHç¯å¢ƒå˜é‡æŒ‡å®šçš„ç›®å½•
4. æ ‡å‡†åº“ç›®å½•
5. site-packagesç›®å½• (ç¬¬ä¸‰æ–¹åº“)
6. .pthæ–‡ä»¶æŒ‡å®šçš„ç›®å½•
"""

import sys

def find_module_location(module_name):
    """æŸ¥æ‰¾æ¨¡å—çš„å®é™…ä½ç½®"""
    try:
        module = __import__(module_name)
        if hasattr(module, '__file__'):
            print(f"æ¨¡å— {module_name} ä½ç½®: {module.__file__}")
        else:
            print(f"æ¨¡å— {module_name} æ˜¯å†…ç½®æ¨¡å—")
    except ImportError:
        print(f"æ¨¡å— {module_name} æœªæ‰¾åˆ°")

# æµ‹è¯•ä¸åŒç±»å‹æ¨¡å—çš„ä½ç½®
find_module_location('os')          # æ ‡å‡†åº“
find_module_location('sys')         # å†…ç½®æ¨¡å—
find_module_location('numpy')       # ç¬¬ä¸‰æ–¹åº“ (å¦‚æœå®‰è£…äº†)
```

### ğŸ·ï¸ å‘½åç©ºé—´ç®¡ç†

#### 1. ç†è§£å‘½åç©ºé—´
```python
# namespace_demo.py
"""å‘½åç©ºé—´æ¼”ç¤º"""

# å…¨å±€å‘½åç©ºé—´
global_var = "æˆ‘æ˜¯å…¨å±€å˜é‡"

def function_demo():
    """å‡½æ•°å‘½åç©ºé—´æ¼”ç¤º"""
    # å±€éƒ¨å‘½åç©ºé—´
    local_var = "æˆ‘æ˜¯å±€éƒ¨å˜é‡"
    
    # è®¿é—®å…¨å±€å˜é‡
    print(f"å‡½æ•°å†…è®¿é—®å…¨å±€å˜é‡: {global_var}")
    print(f"å‡½æ•°å†…è®¿é—®å±€éƒ¨å˜é‡: {local_var}")
    
    # æŸ¥çœ‹å±€éƒ¨å‘½åç©ºé—´
    print(f"å±€éƒ¨å‘½åç©ºé—´: {locals()}")

def namespace_conflict_demo():
    """å‘½åç©ºé—´å†²çªæ¼”ç¤º"""
    global_var = "æˆ‘æ˜¯å±€éƒ¨çš„global_var"  # é®è”½å…¨å±€å˜é‡
    print(f"å±€éƒ¨å˜é‡é®è”½å…¨å±€å˜é‡: {global_var}")
    
    # ä½¿ç”¨globalå…³é”®å­—è®¿é—®å…¨å±€å˜é‡
    global global_var as real_global
    print(f"çœŸæ­£çš„å…¨å±€å˜é‡: {real_global}")

# æ¼”ç¤ºå‘½åç©ºé—´
print(f"å…¨å±€å‘½åç©ºé—´ä¸­çš„å˜é‡: {global_var}")
function_demo()
namespace_conflict_demo()

# æŸ¥çœ‹å…¨å±€å‘½åç©ºé—´
print(f"\nå…¨å±€å‘½åç©ºé—´åŒ…å«: {list(globals().keys())}")
```

#### 2. __name__å˜é‡çš„å¦™ç”¨
```python
# module_main_demo.py
"""__name__å˜é‡æ¼”ç¤º"""

def main_function():
    """ä¸»è¦åŠŸèƒ½å‡½æ•°"""
    print("è¿™æ˜¯æ¨¡å—çš„ä¸»è¦åŠŸèƒ½")

def helper_function():
    """è¾…åŠ©åŠŸèƒ½å‡½æ•°"""
    print("è¿™æ˜¯è¾…åŠ©åŠŸèƒ½")

# æ¨¡å—åˆå§‹åŒ–ä»£ç  (æ€»æ˜¯æ‰§è¡Œ)
print(f"æ¨¡å— {__name__} æ­£åœ¨è¢«å¯¼å…¥...")

# ä¸»ç¨‹åºä»£ç  (åªåœ¨ç›´æ¥è¿è¡Œæ—¶æ‰§è¡Œ)
if __name__ == "__main__":
    print("æ¨¡å—è¢«ç›´æ¥è¿è¡Œ")
    main_function()
    helper_function()
else:
    print("æ¨¡å—è¢«å…¶ä»–ç¨‹åºå¯¼å…¥")

# ä½¿ç”¨ç¤ºä¾‹:
# 1. ç›´æ¥è¿è¡Œ: python module_main_demo.py
# 2. å¯¼å…¥ä½¿ç”¨: import module_main_demo
```

### ğŸ’¼ ç¤ºä¾‹1ï¼šæ¨¡å—åŒ–è®¡ç®—å™¨ç³»ç»Ÿ

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„æ¨¡å—åŒ–è®¡ç®—å™¨ç³»ç»Ÿï¼Œå±•ç¤ºæ¨¡å—è®¾è®¡çš„æœ€ä½³å®è·µï¼š

#### é¡¹ç›®ç»“æ„
```
calculator/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ basic_ops.py      # åŸºç¡€è¿ç®—æ¨¡å—
â”œâ”€â”€ advanced_ops.py   # é«˜çº§è¿ç®—æ¨¡å—
â”œâ”€â”€ constants.py      # å¸¸é‡æ¨¡å—
â”œâ”€â”€ utils.py          # å·¥å…·å‡½æ•°æ¨¡å—
â””â”€â”€ main.py          # ä¸»ç¨‹åº
```

#### 1. å¸¸é‡æ¨¡å— (constants.py)
```python
# calculator/constants.py
"""è®¡ç®—å™¨å¸¸é‡æ¨¡å—"""

import math

# æ•°å­¦å¸¸é‡
PI = math.pi
E = math.e
GOLDEN_RATIO = (1 + math.sqrt(5)) / 2

# è®¡ç®—ç²¾åº¦
DEFAULT_PRECISION = 10
MAX_PRECISION = 15

# é”™è¯¯æ¶ˆæ¯
ERROR_MESSAGES = {
    'division_by_zero': 'é”™è¯¯: é™¤æ•°ä¸èƒ½ä¸ºé›¶',
    'invalid_input': 'é”™è¯¯: è¾“å…¥æ— æ•ˆ',
    'overflow': 'é”™è¯¯: æ•°å€¼æº¢å‡º',
    'domain_error': 'é”™è¯¯: æ•°å­¦åŸŸé”™è¯¯'
}

# æ”¯æŒçš„è¿ç®—ç¬¦
BASIC_OPERATORS = {'+', '-', '*', '/', '%', '**'}
ADVANCED_OPERATORS = {'sin', 'cos', 'tan', 'log', 'ln', 'sqrt'}

if __name__ == "__main__":
    print("è®¡ç®—å™¨å¸¸é‡æ¨¡å—")
    print(f"PI = {PI}")
    print(f"E = {E}")
    print(f"é»„é‡‘æ¯”ä¾‹ = {GOLDEN_RATIO}")
```

#### 2. åŸºç¡€è¿ç®—æ¨¡å— (basic_ops.py)
```python
# calculator/basic_ops.py
"""åŸºç¡€è¿ç®—æ¨¡å— - æä¾›å››åˆ™è¿ç®—ç­‰åŸºæœ¬åŠŸèƒ½"""

from .constants import ERROR_MESSAGES

def add(a, b):
    """åŠ æ³•è¿ç®—"""
    try:
        return float(a) + float(b)
    except (ValueError, TypeError):
        raise ValueError(ERROR_MESSAGES['invalid_input'])

def subtract(a, b):
    """å‡æ³•è¿ç®—"""
    try:
        return float(a) - float(b)
    except (ValueError, TypeError):
        raise ValueError(ERROR_MESSAGES['invalid_input'])

def multiply(a, b):
    """ä¹˜æ³•è¿ç®—"""
    try:
        result = float(a) * float(b)
        if abs(result) > 1e308:  # æ£€æŸ¥æº¢å‡º
            raise OverflowError(ERROR_MESSAGES['overflow'])
        return result
    except (ValueError, TypeError):
        raise ValueError(ERROR_MESSAGES['invalid_input'])

def divide(a, b):
    """é™¤æ³•è¿ç®—"""
    try:
        a, b = float(a), float(b)
        if b == 0:
            raise ZeroDivisionError(ERROR_MESSAGES['division_by_zero'])
        return a / b
    except (ValueError, TypeError):
        raise ValueError(ERROR_MESSAGES['invalid_input'])

def power(a, b):
    """å¹‚è¿ç®—"""
    try:
        a, b = float(a), float(b)
        result = a ** b
        if abs(result) > 1e308:
            raise OverflowError(ERROR_MESSAGES['overflow'])
        return result
    except (ValueError, TypeError):
        raise ValueError(ERROR_MESSAGES['invalid_input'])

def modulo(a, b):
    """å–æ¨¡è¿ç®—"""
    try:
        a, b = float(a), float(b)
        if b == 0:
            raise ZeroDivisionError(ERROR_MESSAGES['division_by_zero'])
        return a % b
    except (ValueError, TypeError):
        raise ValueError(ERROR_MESSAGES['invalid_input'])

def factorial(n):
    """é˜¶ä¹˜è¿ç®—"""
    try:
        n = int(n)
        if n < 0:
            raise ValueError("é˜¶ä¹˜çš„å‚æ•°å¿…é¡»æ˜¯éè´Ÿæ•´æ•°")
        if n > 170:  # é˜²æ­¢æº¢å‡º
            raise OverflowError(ERROR_MESSAGES['overflow'])
        
        result = 1
        for i in range(1, n + 1):
            result *= i
        return result
    except (ValueError, TypeError):
        raise ValueError(ERROR_MESSAGES['invalid_input'])

# è¿ç®—å‡½æ•°æ˜ å°„è¡¨
OPERATIONS = {
    '+': add,
    '-': subtract,
    '*': multiply,
    '/': divide,
    '**': power,
    '%': modulo,
    '!': factorial
}

if __name__ == "__main__":
    print("åŸºç¡€è¿ç®—æ¨¡å—æµ‹è¯•")
    print(f"5 + 3 = {add(5, 3)}")
    print(f"10 - 4 = {subtract(10, 4)}")
    print(f"6 * 7 = {multiply(6, 7)}")
    print(f"15 / 3 = {divide(15, 3)}")
    print(f"2 ** 8 = {power(2, 8)}")
    print(f"17 % 5 = {modulo(17, 5)}")
    print(f"5! = {factorial(5)}")
```

#### 3. é«˜çº§è¿ç®—æ¨¡å— (advanced_ops.py)
```python
# calculator/advanced_ops.py
"""é«˜çº§è¿ç®—æ¨¡å— - æä¾›ä¸‰è§’å‡½æ•°ã€å¯¹æ•°ç­‰é«˜çº§åŠŸèƒ½"""

import math
from .constants import ERROR_MESSAGES, PI

def sin(x, degrees=False):
    """æ­£å¼¦å‡½æ•°"""
    try:
        x = float(x)
        if degrees:
            x = math.radians(x)
        return math.sin(x)
    except (ValueError, TypeError):
        raise ValueError(ERROR_MESSAGES['invalid_input'])

def cos(x, degrees=False):
    """ä½™å¼¦å‡½æ•°"""
    try:
        x = float(x)
        if degrees:
            x = math.radians(x)
        return math.cos(x)
    except (ValueError, TypeError):
        raise ValueError(ERROR_MESSAGES['invalid_input'])

def tan(x, degrees=False):
    """æ­£åˆ‡å‡½æ•°"""
    try:
        x = float(x)
        if degrees:
            x = math.radians(x)
        return math.tan(x)
    except (ValueError, TypeError):
        raise ValueError(ERROR_MESSAGES['invalid_input'])

def log(x, base=10):
    """å¯¹æ•°å‡½æ•°"""
    try:
        x = float(x)
        if x <= 0:
            raise ValueError(ERROR_MESSAGES['domain_error'])
        if base == 10:
            return math.log10(x)
        elif base == math.e:
            return math.log(x)
        else:
            return math.log(x) / math.log(base)
    except (ValueError, TypeError):
        raise ValueError(ERROR_MESSAGES['invalid_input'])

def ln(x):
    """è‡ªç„¶å¯¹æ•°"""
    return log(x, math.e)

def sqrt(x):
    """å¹³æ–¹æ ¹"""
    try:
        x = float(x)
        if x < 0:
            raise ValueError(ERROR_MESSAGES['domain_error'])
        return math.sqrt(x)
    except (ValueError, TypeError):
        raise ValueError(ERROR_MESSAGES['invalid_input'])

def exp(x):
    """æŒ‡æ•°å‡½æ•° e^x"""
    try:
        x = float(x)
        return math.exp(x)
    except (ValueError, TypeError):
        raise ValueError(ERROR_MESSAGES['invalid_input'])
    except OverflowError:
        raise OverflowError(ERROR_MESSAGES['overflow'])

def degrees_to_radians(degrees):
    """è§’åº¦è½¬å¼§åº¦"""
    return float(degrees) * PI / 180

def radians_to_degrees(radians):
    """å¼§åº¦è½¬è§’åº¦"""
    return float(radians) * 180 / PI

# é«˜çº§è¿ç®—å‡½æ•°æ˜ å°„è¡¨
ADVANCED_OPERATIONS = {
    'sin': sin,
    'cos': cos,
    'tan': tan,
    'log': log,
    'ln': ln,
    'sqrt': sqrt,
    'exp': exp
}

if __name__ == "__main__":
    print("é«˜çº§è¿ç®—æ¨¡å—æµ‹è¯•")
    print(f"sin(30Â°) = {sin(30, degrees=True):.6f}")
    print(f"cos(60Â°) = {cos(60, degrees=True):.6f}")
    print(f"tan(45Â°) = {tan(45, degrees=True):.6f}")
    print(f"log10(100) = {log(100)}")
    print(f"ln(e) = {ln(math.e):.6f}")
    print(f"sqrt(16) = {sqrt(16)}")
    print(f"exp(1) = {exp(1):.6f}")
```

#### 4. å·¥å…·å‡½æ•°æ¨¡å— (utils.py)
```python
# calculator/utils.py
"""å·¥å…·å‡½æ•°æ¨¡å—"""

from .constants import DEFAULT_PRECISION

def format_result(result, precision=None):
    """æ ¼å¼åŒ–è®¡ç®—ç»“æœ"""
    if precision is None:
        precision = DEFAULT_PRECISION
    
    # å¤„ç†ç‰¹æ®Šå€¼
    if result == float('inf'):
        return "âˆ"
    elif result == float('-inf'):
        return "-âˆ"
    elif result != result:  # NaN
        return "æœªå®šä¹‰"
    
    # æ ¼å¼åŒ–æ•°å­—
    if abs(result) < 1e-10:
        return "0"
    elif abs(result) > 1e10:
        return f"{result:.{precision}e}"
    else:
        # ç§»é™¤ä¸å¿…è¦çš„å°æ•°ç‚¹åçš„é›¶
        formatted = f"{result:.{precision}f}".rstrip('0').rstrip('.')
        return formatted if formatted else "0"

def validate_number(value):
    """éªŒè¯è¾“å…¥æ˜¯å¦ä¸ºæœ‰æ•ˆæ•°å­—"""
    try:
        float(value)
        return True
    except (ValueError, TypeError):
        return False

def safe_eval(expression):
    """å®‰å…¨åœ°è¯„ä¼°æ•°å­¦è¡¨è¾¾å¼"""
    # è¿™æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬ï¼Œå®é™…åº”ç”¨ä¸­éœ€è¦æ›´ä¸¥æ ¼çš„å®‰å…¨æ£€æŸ¥
    allowed_chars = set('0123456789+-*/.() ')
    if not all(c in allowed_chars for c in expression):
        raise ValueError("è¡¨è¾¾å¼åŒ…å«ä¸å…è®¸çš„å­—ç¬¦")
    
    try:
        return eval(expression)
    except:
        raise ValueError("è¡¨è¾¾å¼æ ¼å¼é”™è¯¯")

def get_operation_help():
    """è·å–æ“ä½œå¸®åŠ©ä¿¡æ¯"""
    help_text = """
    åŸºç¡€è¿ç®—:
      + : åŠ æ³•       ä¾‹: 5 + 3
      - : å‡æ³•       ä¾‹: 10 - 4
      * : ä¹˜æ³•       ä¾‹: 6 * 7
      / : é™¤æ³•       ä¾‹: 15 / 3
      ** : å¹‚è¿ç®—     ä¾‹: 2 ** 8
      % : å–æ¨¡       ä¾‹: 17 % 5
      ! : é˜¶ä¹˜       ä¾‹: 5!
    
    é«˜çº§è¿ç®—:
      sin() : æ­£å¼¦    ä¾‹: sin(30, True) # Trueè¡¨ç¤ºè§’åº¦
      cos() : ä½™å¼¦    ä¾‹: cos(60, True)
      tan() : æ­£åˆ‡    ä¾‹: tan(45, True)
      log() : å¯¹æ•°    ä¾‹: log(100) # é»˜è®¤åº•æ•°10
      ln() : è‡ªç„¶å¯¹æ•°  ä¾‹: ln(2.718)
      sqrt() : å¹³æ–¹æ ¹  ä¾‹: sqrt(16)
      exp() : æŒ‡æ•°    ä¾‹: exp(1)
    """
    return help_text

if __name__ == "__main__":
    print("å·¥å…·å‡½æ•°æ¨¡å—æµ‹è¯•")
    print(f"æ ¼å¼åŒ–ç»“æœ: {format_result(3.141592653589793, 4)}")
    print(f"éªŒè¯æ•°å­—: {validate_number('123.45')}")
    print(f"éªŒè¯æ•°å­—: {validate_number('abc')}")
    print(get_operation_help())
```

#### 5. åŒ…åˆå§‹åŒ–æ–‡ä»¶ (__init__.py)
```python
# calculator/__init__.py
"""
è®¡ç®—å™¨åŒ… - æ¨¡å—åŒ–è®¡ç®—å™¨ç³»ç»Ÿ

è¿™ä¸ªåŒ…æ¼”ç¤ºäº†Pythonæ¨¡å—åŒ–ç¼–ç¨‹çš„æœ€ä½³å®è·µ:
- æ¸…æ™°çš„æ¨¡å—åˆ†å·¥
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- å®Œæ•´çš„æ–‡æ¡£è¯´æ˜
- å¯æ‰©å±•çš„æ¶æ„è®¾è®¡
"""

__version__ = "1.0.0"
__author__ = "Pythonæ•™ç¨‹ç¼–å†™ç»„"

# å¯¼å…¥ä¸»è¦åŠŸèƒ½ï¼Œä½¿åŒ…çš„ä½¿ç”¨æ›´æ–¹ä¾¿
from .basic_ops import add, subtract, multiply, divide, power, modulo, factorial
from .advanced_ops import sin, cos, tan, log, ln, sqrt, exp
from .utils import format_result, validate_number, get_operation_help
from .constants import PI, E, GOLDEN_RATIO

# å®šä¹‰åŒ…çš„å…¬å…±æ¥å£
__all__ = [
    # åŸºç¡€è¿ç®—
    'add', 'subtract', 'multiply', 'divide', 'power', 'modulo', 'factorial',
    # é«˜çº§è¿ç®—
    'sin', 'cos', 'tan', 'log', 'ln', 'sqrt', 'exp',
    # å·¥å…·å‡½æ•°
    'format_result', 'validate_number', 'get_operation_help',
    # å¸¸é‡
    'PI', 'E', 'GOLDEN_RATIO'
]

def get_version():
    """è·å–åŒ…ç‰ˆæœ¬ä¿¡æ¯"""
    return __version__

def get_package_info():
    """è·å–åŒ…ä¿¡æ¯"""
    return {
        'name': 'calculator',
        'version': __version__,
        'author': __author__,
        'description': 'æ¨¡å—åŒ–è®¡ç®—å™¨ç³»ç»Ÿ',
        'modules': ['basic_ops', 'advanced_ops', 'constants', 'utils']
    }

# åŒ…çº§åˆ«çš„åˆå§‹åŒ–
print(f"è®¡ç®—å™¨åŒ… v{__version__} å·²åŠ è½½")
```

#### 6. ä¸»ç¨‹åº (main.py)
```python
# calculator/main.py
"""è®¡ç®—å™¨ä¸»ç¨‹åº - æ¼”ç¤ºæ¨¡å—çš„ä½¿ç”¨"""

import sys
import os

# æ·»åŠ åŒ…è·¯å¾„åˆ°ç³»ç»Ÿè·¯å¾„ (å¦‚æœéœ€è¦)
sys.path.insert(0, os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

# å¯¼å…¥è®¡ç®—å™¨åŒ…
import calculator
from calculator import basic_ops, advanced_ops, utils

class Calculator:
    """è®¡ç®—å™¨ç±» - æ•´åˆæ‰€æœ‰æ¨¡å—åŠŸèƒ½"""
    
    def __init__(self):
        """åˆå§‹åŒ–è®¡ç®—å™¨"""
        self.history = []
        self.precision = 6
        print("ğŸ§® æ¨¡å—åŒ–è®¡ç®—å™¨ç³»ç»Ÿå¯åŠ¨")
        print(f"ç‰ˆæœ¬: {calculator.get_version()}")
        print("è¾“å…¥ 'help' æŸ¥çœ‹å¸®åŠ©ï¼Œè¾“å…¥ 'quit' é€€å‡º")
    
    def calculate(self, expression):
        """æ‰§è¡Œè®¡ç®—"""
        try:
            # è®°å½•åˆ°å†å²
            self.history.append(expression)
            
            # è§£æå’Œè®¡ç®—è¡¨è¾¾å¼ (ç®€åŒ–ç‰ˆæœ¬)
            if '+' in expression:
                parts = expression.split('+')
                result = basic_ops.add(parts[0].strip(), parts[1].strip())
            elif '-' in expression and expression.count('-') == 1:
                parts = expression.split('-')
                result = basic_ops.subtract(parts[0].strip(), parts[1].strip())
            elif '*' in expression:
                parts = expression.split('*')
                result = basic_ops.multiply(parts[0].strip(), parts[1].strip())
            elif '/' in expression:
                parts = expression.split('/')
                result = basic_ops.divide(parts[0].strip(), parts[1].strip())
            elif expression.startswith('sin('):
                value = float(expression[4:-1])
                result = advanced_ops.sin(value, degrees=True)
            elif expression.startswith('cos('):
                value = float(expression[4:-1])
                result = advanced_ops.cos(value, degrees=True)
            elif expression.startswith('sqrt('):
                value = float(expression[5:-1])
                result = advanced_ops.sqrt(value)
            else:
                # å°è¯•ç›´æ¥è®¡ç®—
                result = utils.safe_eval(expression)
            
            # æ ¼å¼åŒ–ç»“æœ
            formatted_result = utils.format_result(result, self.precision)
            print(f"ç»“æœ: {formatted_result}")
            
            return result
            
        except Exception as e:
            print(f"è®¡ç®—é”™è¯¯: {e}")
            return None
    
    def show_history(self):
        """æ˜¾ç¤ºè®¡ç®—å†å²"""
        if not self.history:
            print("æš‚æ— è®¡ç®—å†å²")
            return
        
        print("\nğŸ“œ è®¡ç®—å†å²:")
        for i, expr in enumerate(self.history[-10:], 1):  # åªæ˜¾ç¤ºæœ€è¿‘10æ¡
            print(f"{i:2d}. {expr}")
    
    def run(self):
        """è¿è¡Œè®¡ç®—å™¨ä¸»å¾ªç¯"""
        while True:
            try:
                user_input = input("\nè®¡ç®—å™¨> ").strip()
                
                if user_input.lower() == 'quit':
                    print("ğŸ‘‹ å†è§ï¼")
                    break
                elif user_input.lower() == 'help':
                    print(utils.get_operation_help())
                elif user_input.lower() == 'history':
                    self.show_history()
                elif user_input.lower() == 'clear':
                    self.history.clear()
                    print("å†å²è®°å½•å·²æ¸…ç©º")
                elif user_input.lower().startswith('precision'):
                    try:
                        new_precision = int(user_input.split()[1])
                        self.precision = max(1, min(15, new_precision))
                        print(f"ç²¾åº¦è®¾ç½®ä¸º: {self.precision}")
                    except:
                        print("ç”¨æ³•: precision <æ•°å­—>")
                elif user_input:
                    self.calculate(user_input)
                    
            except KeyboardInterrupt:
                print("\n\nğŸ‘‹ å†è§ï¼")
                break
            except Exception as e:
                print(f"é”™è¯¯: {e}")

def demo_basic_operations():
    """æ¼”ç¤ºåŸºç¡€è¿ç®—åŠŸèƒ½"""
    print("\nğŸ”¢ åŸºç¡€è¿ç®—æ¼”ç¤º:")
    operations = [
        ("5 + 3", lambda: basic_ops.add(5, 3)),
        ("10 - 4", lambda: basic_ops.subtract(10, 4)),
        ("6 * 7", lambda: basic_ops.multiply(6, 7)),
        ("15 / 3", lambda: basic_ops.divide(15, 3)),
        ("2 ** 8", lambda: basic_ops.power(2, 8)),
        ("17 % 5", lambda: basic_ops.modulo(17, 5)),
        ("5!", lambda: basic_ops.factorial(5))
    ]
    
    for expr, func in operations:
        try:
            result = func()
            formatted = utils.format_result(result)
            print(f"{expr:8} = {formatted}")
        except Exception as e:
            print(f"{expr:8} = é”™è¯¯: {e}")

def demo_advanced_operations():
    """æ¼”ç¤ºé«˜çº§è¿ç®—åŠŸèƒ½"""
    print("\nğŸ“ é«˜çº§è¿ç®—æ¼”ç¤º:")
    operations = [
        ("sin(30Â°)", lambda: advanced_ops.sin(30, degrees=True)),
        ("cos(60Â°)", lambda: advanced_ops.cos(60, degrees=True)),
        ("tan(45Â°)", lambda: advanced_ops.tan(45, degrees=True)),
        ("logâ‚â‚€(100)", lambda: advanced_ops.log(100)),
        ("ln(e)", lambda: advanced_ops.ln(calculator.E)),
        ("âˆš16", lambda: advanced_ops.sqrt(16)),
        ("eÂ¹", lambda: advanced_ops.exp(1))
    ]
    
    for expr, func in operations:
        try:
            result = func()
            formatted = utils.format_result(result)
            print(f"{expr:10} = {formatted}")
        except Exception as e:
            print(f"{expr:10} = é”™è¯¯: {e}")

def main():
    """ä¸»å‡½æ•°"""
    print("=" * 50)
    print("ğŸ§® æ¨¡å—åŒ–è®¡ç®—å™¨ç³»ç»Ÿæ¼”ç¤º")
    print("=" * 50)
    
    # æ˜¾ç¤ºåŒ…ä¿¡æ¯
    package_info = calculator.get_package_info()
    print(f"ğŸ“¦ åŒ…ä¿¡æ¯: {package_info['name']} v{package_info['version']}")
    print(f"ğŸ‘¨â€ğŸ’» ä½œè€…: {package_info['author']}")
    print(f"ğŸ“ æè¿°: {package_info['description']}")
    
    # æ¼”ç¤ºå„ç§åŠŸèƒ½
    demo_basic_operations()
    demo_advanced_operations()
    
    # å¯åŠ¨äº¤äº’å¼è®¡ç®—å™¨
    print("\n" + "=" * 50)
    print("ğŸš€ å¯åŠ¨äº¤äº’å¼è®¡ç®—å™¨")
    print("=" * 50)
    
    calc = Calculator()
    calc.run()

if __name__ == "__main__":
    main()
```

### ğŸ¯ æ¨¡å—è®¾è®¡æœ€ä½³å®è·µ

#### 1. å•ä¸€èŒè´£åŸåˆ™
```python
# âŒ ä¸å¥½çš„è®¾è®¡ - ä¸€ä¸ªæ¨¡å—åšå¤ªå¤šäº‹æƒ…
# everything.py
def add(a, b): pass
def send_email(to, subject): pass
def connect_database(): pass
def draw_chart(data): pass

# âœ… å¥½çš„è®¾è®¡ - æ¯ä¸ªæ¨¡å—èŒè´£å•ä¸€
# math_ops.py
def add(a, b): pass
def subtract(a, b): pass

# email_service.py  
def send_email(to, subject): pass
def validate_email(email): pass

# database.py
def connect(): pass
def execute_query(sql): pass
```

#### 2. æ¸…æ™°çš„APIè®¾è®¡
```python
# good_module.py
"""
ä¼˜ç§€çš„æ¨¡å—è®¾è®¡ç¤ºä¾‹

è¿™ä¸ªæ¨¡å—å±•ç¤ºäº†è‰¯å¥½çš„APIè®¾è®¡åŸåˆ™:
- æ¸…æ™°çš„å‡½æ•°å‘½å
- å®Œæ•´çš„æ–‡æ¡£å­—ç¬¦ä¸²
- åˆç†çš„å‚æ•°è®¾è®¡
- ä¸€è‡´çš„è¿”å›å€¼
"""

def calculate_compound_interest(principal, rate, time, compound_frequency=1):
    """
    è®¡ç®—å¤åˆ©
    
    Args:
        principal (float): æœ¬é‡‘
        rate (float): å¹´åˆ©ç‡ (å°æ•°å½¢å¼ï¼Œå¦‚0.05è¡¨ç¤º5%)
        time (float): æ—¶é—´ (å¹´)
        compound_frequency (int): å¤åˆ©é¢‘ç‡ (æ¯å¹´å¤åˆ©æ¬¡æ•°)
    
    Returns:
        dict: åŒ…å«æœ¬é‡‘ã€åˆ©æ¯ã€æ€»é¢çš„å­—å…¸
        
    Raises:
        ValueError: å½“å‚æ•°æ— æ•ˆæ—¶
        
    Example:
        >>> result = calculate_compound_interest(1000, 0.05, 2, 4)
        >>> print(result['total'])
        1104.49
    """
    if principal <= 0:
        raise ValueError("æœ¬é‡‘å¿…é¡»å¤§äº0")
    if rate < 0:
        raise ValueError("åˆ©ç‡ä¸èƒ½ä¸ºè´Ÿ")
    if time <= 0:
        raise ValueError("æ—¶é—´å¿…é¡»å¤§äº0")
    if compound_frequency <= 0:
        raise ValueError("å¤åˆ©é¢‘ç‡å¿…é¡»å¤§äº0")
    
    # å¤åˆ©å…¬å¼: A = P(1 + r/n)^(nt)
    total = principal * (1 + rate/compound_frequency) ** (compound_frequency * time)
    interest = total - principal
    
    return {
        'principal': round(principal, 2),
        'interest': round(interest, 2),
        'total': round(total, 2),
        'rate': rate,
        'time': time,
        'compound_frequency': compound_frequency
    }

# æ¨¡å—çº§åˆ«çš„å¸¸é‡
DEFAULT_RATE = 0.05
MAX_TIME_YEARS = 100

# æ¨¡å—æµ‹è¯•ä»£ç 
if __name__ == "__main__":
    # æµ‹è¯•ç”¨ä¾‹
    test_cases = [
        (1000, 0.05, 2, 4),
        (5000, 0.03, 5, 12),
        (10000, 0.08, 10, 1)
    ]
    
    for principal, rate, time, freq in test_cases:
        result = calculate_compound_interest(principal, rate, time, freq)
        print(f"æœ¬é‡‘: ${result['principal']}, "
              f"åˆ©ç‡: {rate*100}%, "
              f"æ—¶é—´: {time}å¹´, "
              f"æ€»é¢: ${result['total']}")
```

é€šè¿‡è¿™ä¸ªæ¨¡å—åŒ–è®¡ç®—å™¨ç³»ç»Ÿçš„å®Œæ•´ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š

1. **æ¸…æ™°çš„æ¨¡å—åˆ†å·¥**: æ¯ä¸ªæ¨¡å—éƒ½æœ‰æ˜ç¡®çš„èŒè´£
2. **ç»Ÿä¸€çš„é”™è¯¯å¤„ç†**: ä½¿ç”¨å¸¸é‡æ¨¡å—ç»Ÿä¸€ç®¡ç†é”™è¯¯æ¶ˆæ¯
3. **å®Œæ•´çš„æ–‡æ¡£**: æ¯ä¸ªå‡½æ•°éƒ½æœ‰è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²
4. **å¯æ‰©å±•çš„è®¾è®¡**: å®¹æ˜“æ·»åŠ æ–°çš„è¿ç®—åŠŸèƒ½
5. **å®ç”¨çš„å·¥å…·å‡½æ•°**: æä¾›æ ¼å¼åŒ–ã€éªŒè¯ç­‰è¾…åŠ©åŠŸèƒ½

è¿™ç§æ¨¡å—åŒ–çš„è®¾è®¡è®©ä»£ç æ›´æ˜“ç»´æŠ¤ã€æµ‹è¯•å’Œæ‰©å±•ï¼Œæ˜¯ä¼ä¸šçº§Pythonå¼€å‘çš„æ ‡å‡†åšæ³•ã€‚

---

## 12.3 åŒ…ç®¡ç†ä¸è™šæ‹Ÿç¯å¢ƒ

### ğŸ“ æ¦‚å¿µç†è§£ï¼šåŒ…ç®¡ç†å™¨å°±åƒå·¥å…·ä¾›åº”å•†

ç»§ç»­æˆ‘ä»¬çš„å·¥å…·åº“æˆ¿æ¯”å–»ï¼š
- **åŒ…ç®¡ç†å™¨(pip)**: å°±åƒå·¥å…·ä¾›åº”å•†ï¼Œå¸®ä½ è·å–ã€å®‰è£…ã€æ›´æ–°å„ç§å·¥å…·
- **è™šæ‹Ÿç¯å¢ƒ**: å°±åƒä¸ºæ¯ä¸ªé¡¹ç›®å‡†å¤‡ç‹¬ç«‹çš„å·¥ä½œé—´ï¼Œé¿å…å·¥å…·æ··ä¹±
- **ä¾èµ–ç®¡ç†**: å°±åƒå·¥å…·æ¸…å•ï¼Œè®°å½•é¡¹ç›®éœ€è¦å“ªäº›å·¥å…·åŠç‰ˆæœ¬
- **é•œåƒæº**: å°±åƒä¸åŒçš„ä¾›åº”å•†ï¼Œæœ‰äº›æ›´å¿«æ›´ç¨³å®š

### ğŸ› ï¸ pipåŒ…ç®¡ç†è¯¦è§£

#### 1. åŸºç¡€pipå‘½ä»¤
```bash
# å®‰è£…åŒ…
pip install package_name
pip install package_name==1.2.3    # å®‰è£…ç‰¹å®šç‰ˆæœ¬
pip install package_name>=1.2.0    # å®‰è£…æœ€ä½ç‰ˆæœ¬
pip install -r requirements.txt    # ä»æ–‡ä»¶å®‰è£…

# å‡çº§åŒ…
pip install --upgrade package_name
pip install -U package_name         # ç®€å†™

# å¸è½½åŒ…
pip uninstall package_name
pip uninstall -r requirements.txt

# æŸ¥çœ‹å·²å®‰è£…çš„åŒ…
pip list                           # åˆ—å‡ºæ‰€æœ‰åŒ…
pip list --outdated               # åˆ—å‡ºè¿‡æœŸåŒ…
pip show package_name             # æ˜¾ç¤ºåŒ…è¯¦æƒ…

# æœç´¢åŒ…
pip search keyword                # æœç´¢åŒ… (å·²åºŸå¼ƒ)

# å¯¼å‡ºä¾èµ–
pip freeze > requirements.txt     # å¯¼å‡ºå½“å‰ç¯å¢ƒçš„æ‰€æœ‰åŒ…
pip freeze --local > requirements.txt  # åªå¯¼å‡ºæœ¬åœ°å®‰è£…çš„åŒ…
```

#### 2. pipé«˜çº§åŠŸèƒ½
```python
# pip_manager.py - pipç®¡ç†å·¥å…·
"""pipåŒ…ç®¡ç†å·¥å…·"""

import subprocess
import sys
import json
from typing import List, Dict, Optional

class PipManager:
    """pipåŒ…ç®¡ç†å™¨å°è£…ç±»"""
    
    def __init__(self, python_executable=None):
        """
        åˆå§‹åŒ–pipç®¡ç†å™¨
        
        Args:
            python_executable: Pythonå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„
        """
        self.python_executable = python_executable or sys.executable
    
    def _run_pip_command(self, command: List[str]) -> str:
        """
        æ‰§è¡Œpipå‘½ä»¤
        
        Args:
            command: pipå‘½ä»¤åˆ—è¡¨
        
        Returns:
            å‘½ä»¤è¾“å‡º
        """
        full_command = [self.python_executable, '-m', 'pip'] + command
        try:
            result = subprocess.run(
                full_command, 
                capture_output=True, 
                text=True, 
                check=True
            )
            return result.stdout
        except subprocess.CalledProcessError as e:
            raise RuntimeError(f"pipå‘½ä»¤æ‰§è¡Œå¤±è´¥: {e.stderr}")
    
    def install(self, package: str, upgrade: bool = False, 
                user: bool = False, requirements_file: str = None) -> str:
        """
        å®‰è£…åŒ…
        
        Args:
            package: åŒ…å
            upgrade: æ˜¯å¦å‡çº§
            user: æ˜¯å¦å®‰è£…åˆ°ç”¨æˆ·ç›®å½•
            requirements_file: requirementsæ–‡ä»¶è·¯å¾„
        
        Returns:
            å®‰è£…è¾“å‡º
        """
        command = ['install']
        
        if upgrade:
            command.append('--upgrade')
        if user:
            command.append('--user')
        if requirements_file:
            command.extend(['-r', requirements_file])
        else:
            command.append(package)
        
        return self._run_pip_command(command)
    
    def uninstall(self, package: str, yes: bool = True) -> str:
        """
        å¸è½½åŒ…
        
        Args:
            package: åŒ…å
            yes: è‡ªåŠ¨ç¡®è®¤
        
        Returns:
            å¸è½½è¾“å‡º
        """
        command = ['uninstall', package]
        if yes:
            command.append('-y')
        
        return self._run_pip_command(command)
    
    def list_packages(self, outdated: bool = False) -> List[Dict]:
        """
        åˆ—å‡ºå·²å®‰è£…çš„åŒ…
        
        Args:
            outdated: åªæ˜¾ç¤ºè¿‡æœŸåŒ…
        
        Returns:
            åŒ…ä¿¡æ¯åˆ—è¡¨
        """
        command = ['list', '--format=json']
        if outdated:
            command.append('--outdated')
        
        output = self._run_pip_command(command)
        return json.loads(output)
    
    def show_package(self, package: str) -> Dict:
        """
        æ˜¾ç¤ºåŒ…è¯¦ç»†ä¿¡æ¯
        
        Args:
            package: åŒ…å
        
        Returns:
            åŒ…è¯¦ç»†ä¿¡æ¯
        """
        command = ['show', package]
        output = self._run_pip_command(command)
        
        # è§£æè¾“å‡º
        info = {}
        for line in output.strip().split('\n'):
            if ':' in line:
                key, value = line.split(':', 1)
                info[key.strip()] = value.strip()
        
        return info
    
    def freeze(self, local_only: bool = True) -> str:
        """
        å¯¼å‡ºä¾èµ–åˆ—è¡¨
        
        Args:
            local_only: åªå¯¼å‡ºæœ¬åœ°å®‰è£…çš„åŒ…
        
        Returns:
            ä¾èµ–åˆ—è¡¨å­—ç¬¦ä¸²
        """
        command = ['freeze']
        if local_only:
            command.append('--local')
        
        return self._run_pip_command(command)
    
    def check_dependencies(self) -> str:
        """
        æ£€æŸ¥ä¾èµ–å®Œæ•´æ€§
        
        Returns:
            æ£€æŸ¥ç»“æœ
        """
        return self._run_pip_command(['check'])

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    pip_manager = PipManager()
    
    # åˆ—å‡ºå·²å®‰è£…çš„åŒ…
    packages = pip_manager.list_packages()
    print("å·²å®‰è£…çš„åŒ…:")
    for pkg in packages[:5]:  # åªæ˜¾ç¤ºå‰5ä¸ª
        print(f"  {pkg['name']} {pkg['version']}")
    
    # æ˜¾ç¤ºç‰¹å®šåŒ…ä¿¡æ¯
    try:
        info = pip_manager.show_package('pip')
        print(f"\npipåŒ…ä¿¡æ¯:")
        print(f"  ç‰ˆæœ¬: {info.get('Version', 'N/A')}")
        print(f"  ä½ç½®: {info.get('Location', 'N/A')}")
    except:
        print("æ— æ³•è·å–pipåŒ…ä¿¡æ¯")
    
    # å¯¼å‡ºä¾èµ–
    dependencies = pip_manager.freeze()
    print(f"\nå½“å‰ç¯å¢ƒä¾èµ–æ•°é‡: {len(dependencies.split())}")
```

#### 3. requirements.txtç®¡ç†
```python
# requirements_manager.py
"""requirements.txtæ–‡ä»¶ç®¡ç†å·¥å…·"""

import os
import re
from typing import List, Dict, Set
from dataclasses import dataclass

@dataclass
class Requirement:
    """ä¾èµ–åŒ…ä¿¡æ¯"""
    name: str
    version_spec: str = ""
    extras: List[str] = None
    comment: str = ""
    
    def __post_init__(self):
        if self.extras is None:
            self.extras = []
    
    def __str__(self):
        result = self.name
        if self.extras:
            result += f"[{','.join(self.extras)}]"
        if self.version_spec:
            result += self.version_spec
        if self.comment:
            result += f"  # {self.comment}"
        return result

class RequirementsManager:
    """requirements.txtç®¡ç†å™¨"""
    
    def __init__(self, file_path: str = "requirements.txt"):
        """
        åˆå§‹åŒ–requirementsç®¡ç†å™¨
        
        Args:
            file_path: requirementsæ–‡ä»¶è·¯å¾„
        """
        self.file_path = file_path
        self.requirements: Dict[str, Requirement] = {}
        
        if os.path.exists(file_path):
            self.load()
    
    def parse_requirement_line(self, line: str) -> Requirement:
        """
        è§£ærequirementsæ–‡ä»¶ä¸­çš„ä¸€è¡Œ
        
        Args:
            line: ä¾èµ–è¡Œ
        
        Returns:
            Requirementå¯¹è±¡
        """
        line = line.strip()
        if not line or line.startswith('#'):
            return None
        
        # åˆ†ç¦»æ³¨é‡Š
        comment = ""
        if '#' in line:
            line, comment = line.split('#', 1)
            line = line.strip()
            comment = comment.strip()
        
        # è§£æåŒ…åå’Œç‰ˆæœ¬
        # æ”¯æŒæ ¼å¼: package, package==1.0, package>=1.0, package[extra]
        pattern = r'^([a-zA-Z0-9_-]+)(\[([^\]]+)\])?(.*)?$'
        match = re.match(pattern, line)
        
        if not match:
            raise ValueError(f"æ— æ³•è§£æä¾èµ–è¡Œ: {line}")
        
        name = match.group(1)
        extras_str = match.group(3) or ""
        version_spec = match.group(4) or ""
        
        extras = [e.strip() for e in extras_str.split(',')] if extras_str else []
        
        return Requirement(
            name=name,
            version_spec=version_spec,
            extras=extras,
            comment=comment
        )
    
    def load(self):
        """ä»æ–‡ä»¶åŠ è½½requirements"""
        self.requirements.clear()
        
        with open(self.file_path, 'r', encoding='utf-8') as f:
            for line_num, line in enumerate(f, 1):
                try:
                    req = self.parse_requirement_line(line)
                    if req:
                        self.requirements[req.name] = req
                except ValueError as e:
                    print(f"ç¬¬{line_num}è¡Œè§£æé”™è¯¯: {e}")
    
    def save(self):
        """ä¿å­˜requirementsåˆ°æ–‡ä»¶"""
        with open(self.file_path, 'w', encoding='utf-8') as f:
            # æŒ‰åç§°æ’åº
            sorted_reqs = sorted(self.requirements.values(), key=lambda x: x.name.lower())
            for req in sorted_reqs:
                f.write(str(req) + '\n')
    
    def add(self, name: str, version_spec: str = "", comment: str = ""):
        """
        æ·»åŠ ä¾èµ–
        
        Args:
            name: åŒ…å
            version_spec: ç‰ˆæœ¬è§„èŒƒ
            comment: æ³¨é‡Š
        """
        self.requirements[name] = Requirement(
            name=name,
            version_spec=version_spec,
            comment=comment
        )
    
    def remove(self, name: str):
        """
        ç§»é™¤ä¾èµ–
        
        Args:
            name: åŒ…å
        """
        if name in self.requirements:
            del self.requirements[name]
    
    def update_version(self, name: str, version_spec: str):
        """
        æ›´æ–°åŒ…ç‰ˆæœ¬
        
        Args:
            name: åŒ…å
            version_spec: æ–°ç‰ˆæœ¬è§„èŒƒ
        """
        if name in self.requirements:
            self.requirements[name].version_spec = version_spec
    
    def get_package_names(self) -> Set[str]:
        """è·å–æ‰€æœ‰åŒ…å"""
        return set(self.requirements.keys())
    
    def compare_with_installed(self, installed_packages: List[Dict]) -> Dict:
        """
        ä¸å·²å®‰è£…åŒ…æ¯”è¾ƒ
        
        Args:
            installed_packages: å·²å®‰è£…åŒ…åˆ—è¡¨
        
        Returns:
            æ¯”è¾ƒç»“æœ
        """
        installed_names = {pkg['name'].lower() for pkg in installed_packages}
        required_names = {name.lower() for name in self.requirements.keys()}
        
        return {
            'missing': required_names - installed_names,
            'extra': installed_names - required_names,
            'common': required_names & installed_names
        }
    
    def generate_dev_requirements(self, dev_packages: List[str]):
        """
        ç”Ÿæˆå¼€å‘ç¯å¢ƒrequirements
        
        Args:
            dev_packages: å¼€å‘ä¾èµ–åŒ…åˆ—è¡¨
        """
        dev_file = self.file_path.replace('.txt', '-dev.txt')
        
        with open(dev_file, 'w', encoding='utf-8') as f:
            # å…ˆåŒ…å«ç”Ÿäº§ä¾èµ–
            f.write(f"-r {os.path.basename(self.file_path)}\n\n")
            f.write("# å¼€å‘ä¾èµ–\n")
            
            for pkg in sorted(dev_packages):
                f.write(f"{pkg}\n")

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    # åˆ›å»ºrequirementsç®¡ç†å™¨
    req_manager = RequirementsManager("requirements.txt")
    
    # æ·»åŠ ä¸€äº›ä¾èµ–
    req_manager.add("requests", ">=2.25.0", "HTTPåº“")
    req_manager.add("pandas", ">=1.3.0", "æ•°æ®åˆ†æ")
    req_manager.add("numpy", ">=1.20.0", "æ•°å€¼è®¡ç®—")
    req_manager.add("flask", ">=2.0.0", "Webæ¡†æ¶")
    
    # ä¿å­˜åˆ°æ–‡ä»¶
    req_manager.save()
    print("requirements.txtå·²ç”Ÿæˆ")
    
    # ç”Ÿæˆå¼€å‘ç¯å¢ƒä¾èµ–
    dev_packages = ["pytest", "black", "flake8", "mypy"]
    req_manager.generate_dev_requirements(dev_packages)
    print("requirements-dev.txtå·²ç”Ÿæˆ")
    
    # æ˜¾ç¤ºåŒ…åˆ—è¡¨
    print(f"\né¡¹ç›®ä¾èµ–åŒ… ({len(req_manager.requirements)} ä¸ª):")
    for name, req in req_manager.requirements.items():
        print(f"  {req}")
```

### ğŸ  è™šæ‹Ÿç¯å¢ƒç®¡ç†

#### 1. venvæ¨¡å—ä½¿ç”¨
```python
# venv_manager.py
"""è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·"""

import os
import sys
import subprocess
import shutil
from pathlib import Path
from typing import List, Dict, Optional

class VenvManager:
    """è™šæ‹Ÿç¯å¢ƒç®¡ç†å™¨"""
    
    def __init__(self, base_dir: str = "venvs"):
        """
        åˆå§‹åŒ–è™šæ‹Ÿç¯å¢ƒç®¡ç†å™¨
        
        Args:
            base_dir: è™šæ‹Ÿç¯å¢ƒåŸºç¡€ç›®å½•
        """
        self.base_dir = Path(base_dir)
        self.base_dir.mkdir(exist_ok=True)
    
    def create(self, name: str, python_version: str = None) -> str:
        """
        åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
        
        Args:
            name: ç¯å¢ƒåç§°
            python_version: Pythonç‰ˆæœ¬
        
        Returns:
            ç¯å¢ƒè·¯å¾„
        """
        env_path = self.base_dir / name
        
        if env_path.exists():
            raise ValueError(f"è™šæ‹Ÿç¯å¢ƒ {name} å·²å­˜åœ¨")
        
        # æ„å»ºåˆ›å»ºå‘½ä»¤
        python_exe = python_version or sys.executable
        command = [python_exe, '-m', 'venv', str(env_path)]
        
        try:
            subprocess.run(command, check=True, capture_output=True, text=True)
            print(f"è™šæ‹Ÿç¯å¢ƒ {name} åˆ›å»ºæˆåŠŸ: {env_path}")
            return str(env_path)
        except subprocess.CalledProcessError as e:
            raise RuntimeError(f"åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¤±è´¥: {e.stderr}")
    
    def delete(self, name: str) -> bool:
        """
        åˆ é™¤è™šæ‹Ÿç¯å¢ƒ
        
        Args:
            name: ç¯å¢ƒåç§°
        
        Returns:
            æ˜¯å¦æˆåŠŸåˆ é™¤
        """
        env_path = self.base_dir / name
        
        if not env_path.exists():
            print(f"è™šæ‹Ÿç¯å¢ƒ {name} ä¸å­˜åœ¨")
            return False
        
        try:
            shutil.rmtree(env_path)
            print(f"è™šæ‹Ÿç¯å¢ƒ {name} åˆ é™¤æˆåŠŸ")
            return True
        except Exception as e:
            print(f"åˆ é™¤è™šæ‹Ÿç¯å¢ƒå¤±è´¥: {e}")
            return False
    
    def list_environments(self) -> List[Dict]:
        """
        åˆ—å‡ºæ‰€æœ‰è™šæ‹Ÿç¯å¢ƒ
        
        Returns:
            ç¯å¢ƒä¿¡æ¯åˆ—è¡¨
        """
        environments = []
        
        for env_dir in self.base_dir.iterdir():
            if env_dir.is_dir():
                # æ£€æŸ¥æ˜¯å¦æ˜¯æœ‰æ•ˆçš„è™šæ‹Ÿç¯å¢ƒ
                if self._is_valid_venv(env_dir):
                    python_exe = self._get_python_executable(env_dir)
                    version = self._get_python_version(python_exe)
                    
                    environments.append({
                        'name': env_dir.name,
                        'path': str(env_dir),
                        'python_version': version,
                        'python_executable': python_exe
                    })
        
        return environments
    
    def _is_valid_venv(self, env_path: Path) -> bool:
        """æ£€æŸ¥æ˜¯å¦æ˜¯æœ‰æ•ˆçš„è™šæ‹Ÿç¯å¢ƒ"""
        # æ£€æŸ¥å…³é”®æ–‡ä»¶/ç›®å½•æ˜¯å¦å­˜åœ¨
        if os.name == 'nt':  # Windows
            return (env_path / 'Scripts' / 'python.exe').exists()
        else:  # Unix/Linux/macOS
            return (env_path / 'bin' / 'python').exists()
    
    def _get_python_executable(self, env_path: Path) -> str:
        """è·å–è™šæ‹Ÿç¯å¢ƒçš„Pythonå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„"""
        if os.name == 'nt':  # Windows
            return str(env_path / 'Scripts' / 'python.exe')
        else:  # Unix/Linux/macOS
            return str(env_path / 'bin' / 'python')
    
    def _get_python_version(self, python_exe: str) -> str:
        """è·å–Pythonç‰ˆæœ¬"""
        try:
            result = subprocess.run(
                [python_exe, '--version'],
                capture_output=True,
                text=True,
                check=True
            )
            return result.stdout.strip()
        except:
            return "æœªçŸ¥ç‰ˆæœ¬"
    
    def activate_command(self, name: str) -> str:
        """
        è·å–æ¿€æ´»å‘½ä»¤
        
        Args:
            name: ç¯å¢ƒåç§°
        
        Returns:
            æ¿€æ´»å‘½ä»¤
        """
        env_path = self.base_dir / name
        
        if not env_path.exists():
            raise ValueError(f"è™šæ‹Ÿç¯å¢ƒ {name} ä¸å­˜åœ¨")
        
        if os.name == 'nt':  # Windows
            return f"{env_path}\\Scripts\\activate"
        else:  # Unix/Linux/macOS
            return f"source {env_path}/bin/activate"
    
    def install_requirements(self, name: str, requirements_file: str) -> str:
        """
        åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…ä¾èµ–
        
        Args:
            name: ç¯å¢ƒåç§°
            requirements_file: requirementsæ–‡ä»¶è·¯å¾„
        
        Returns:
            å®‰è£…è¾“å‡º
        """
        env_path = self.base_dir / name
        python_exe = self._get_python_executable(env_path)
        
        if not os.path.exists(python_exe):
            raise ValueError(f"è™šæ‹Ÿç¯å¢ƒ {name} ä¸å­˜åœ¨æˆ–æ— æ•ˆ")
        
        command = [python_exe, '-m', 'pip', 'install', '-r', requirements_file]
        
        try:
            result = subprocess.run(
                command,
                capture_output=True,
                text=True,
                check=True
            )
            return result.stdout
        except subprocess.CalledProcessError as e:
            raise RuntimeError(f"å®‰è£…ä¾èµ–å¤±è´¥: {e.stderr}")

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    venv_manager = VenvManager()
    
    # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
    try:
        venv_manager.create("myproject")
        print("è™šæ‹Ÿç¯å¢ƒåˆ›å»ºæˆåŠŸ")
    except Exception as e:
        print(f"åˆ›å»ºå¤±è´¥: {e}")
    
    # åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒ
    environments = venv_manager.list_environments()
    print(f"\næ‰¾åˆ° {len(environments)} ä¸ªè™šæ‹Ÿç¯å¢ƒ:")
    for env in environments:
        print(f"  {env['name']}: {env['python_version']}")
    
    # æ˜¾ç¤ºæ¿€æ´»å‘½ä»¤
    if environments:
        env_name = environments[0]['name']
        activate_cmd = venv_manager.activate_command(env_name)
        print(f"\næ¿€æ´» {env_name} ç¯å¢ƒçš„å‘½ä»¤:")
        print(f"  {activate_cmd}")
```

### ğŸ’¼ ç¤ºä¾‹3ï¼šé¡¹ç›®ç¯å¢ƒç®¡ç†ç³»ç»Ÿ

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ç¯å¢ƒç®¡ç†ç³»ç»Ÿï¼š

```python
# project_env_manager.py
"""é¡¹ç›®ç¯å¢ƒç®¡ç†ç³»ç»Ÿ"""

import os
import json
import shutil
from pathlib import Path
from typing import Dict, List, Optional
from dataclasses import dataclass, asdict
from datetime import datetime

@dataclass
class ProjectConfig:
    """é¡¹ç›®é…ç½®"""
    name: str
    description: str
    python_version: str
    dependencies: List[str]
    dev_dependencies: List[str]
    environment_type: str  # 'venv' or 'conda'
    created_at: str
    last_updated: str

class ProjectEnvironmentManager:
    """é¡¹ç›®ç¯å¢ƒç®¡ç†å™¨"""
    
    def __init__(self, projects_dir: str = "projects"):
        """
        åˆå§‹åŒ–é¡¹ç›®ç¯å¢ƒç®¡ç†å™¨
        
        Args:
            projects_dir: é¡¹ç›®æ ¹ç›®å½•
        """
        self.projects_dir = Path(projects_dir)
        self.projects_dir.mkdir(exist_ok=True)
        self.config_file = self.projects_dir / "projects.json"
        self.projects = self._load_projects()
    
    def _load_projects(self) -> Dict[str, ProjectConfig]:
        """åŠ è½½é¡¹ç›®é…ç½®"""
        if self.config_file.exists():
            with open(self.config_file, 'r', encoding='utf-8') as f:
                data = json.load(f)
                return {
                    name: ProjectConfig(**config) 
                    for name, config in data.items()
                }
        return {}
    
    def _save_projects(self):
        """ä¿å­˜é¡¹ç›®é…ç½®"""
        data = {
            name: asdict(config) 
            for name, config in self.projects.items()
        }
        with open(self.config_file, 'w', encoding='utf-8') as f:
            json.dump(data, f, indent=2, ensure_ascii=False)
    
    def create_project(self, name: str, description: str = "", 
                      python_version: str = "3.9",
                      environment_type: str = "venv") -> str:
        """
        åˆ›å»ºæ–°é¡¹ç›®
        
        Args:
            name: é¡¹ç›®åç§°
            description: é¡¹ç›®æè¿°
            python_version: Pythonç‰ˆæœ¬
            environment_type: ç¯å¢ƒç±»å‹
        
        Returns:
            é¡¹ç›®è·¯å¾„
        """
        if name in self.projects:
            raise ValueError(f"é¡¹ç›® {name} å·²å­˜åœ¨")
        
        project_path = self.projects_dir / name
        project_path.mkdir(exist_ok=True)
        
        # åˆ›å»ºé¡¹ç›®ç»“æ„
        self._create_project_structure(project_path)
        
        # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
        if environment_type == "venv":
            self._create_venv(project_path, python_version)
        elif environment_type == "conda":
            self._create_conda_env(name, python_version)
        
        # ä¿å­˜é¡¹ç›®é…ç½®
        now = datetime.now().isoformat()
        self.projects[name] = ProjectConfig(
            name=name,
            description=description,
            python_version=python_version,
            dependencies=[],
            dev_dependencies=[],
            environment_type=environment_type,
            created_at=now,
            last_updated=now
        )
        
        self._save_projects()
        print(f"é¡¹ç›® {name} åˆ›å»ºæˆåŠŸ: {project_path}")
        return str(project_path)
    
    def _create_project_structure(self, project_path: Path):
        """åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„"""
        # åˆ›å»ºæ ‡å‡†ç›®å½•
        directories = [
            'src',
            'tests', 
            'docs',
            'config',
            'data',
            'scripts'
        ]
        
        for dir_name in directories:
            (project_path / dir_name).mkdir(exist_ok=True)
        
        # åˆ›å»ºåŸºæœ¬æ–‡ä»¶
        files = {
            'README.md': f"# {project_path.name}\n\né¡¹ç›®æè¿°\n",
            'requirements.txt': "# ç”Ÿäº§ä¾èµ–\n",
            'requirements-dev.txt': "# å¼€å‘ä¾èµ–\n-r requirements.txt\n\npytest\nblack\nflake8\n",
            '.gitignore': self._get_gitignore_content(),
            'setup.py': self._get_setup_py_content(project_path.name),
            'pyproject.toml': self._get_pyproject_toml_content(project_path.name)
        }
        
        for filename, content in files.items():
            file_path = project_path / filename
            if not file_path.exists():
                with open(file_path, 'w', encoding='utf-8') as f:
                    f.write(content)
    
    def _get_gitignore_content(self) -> str:
        """è·å–.gitignoreå†…å®¹"""
        return """# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg

# Virtual Environment
venv/
env/
ENV/

# IDE
.vscode/
.idea/
*.swp
*.swo

# OS
.DS_Store
Thumbs.db

# Project specific
config/local.py
data/raw/
logs/
"""
    
    def _get_setup_py_content(self, project_name: str) -> str:
        """è·å–setup.pyå†…å®¹"""
        return f'''from setuptools import setup, find_packages

setup(
    name="{project_name}",
    version="0.1.0",
    packages=find_packages(where="src"),
    package_dir={{"": "src"}},
    install_requires=[
        # åœ¨è¿™é‡Œæ·»åŠ ä¾èµ–
    ],
    extras_require={{
        "dev": [
            "pytest",
            "black", 
            "flake8",
            "mypy"
        ]
    }},
    python_requires=">=3.7",
    author="Your Name",
    author_email="your.email@example.com",
    description="A short description",
    long_description=open("README.md").read(),
    long_description_content_type="text/markdown",
)
'''
    
    def _get_pyproject_toml_content(self, project_name: str) -> str:
        """è·å–pyproject.tomlå†…å®¹"""
        return f'''[build-system]
requires = ["setuptools>=45", "wheel", "setuptools_scm[toml]>=6.2"]
build-backend = "setuptools.build_meta"

[project]
name = "{project_name}"
version = "0.1.0"
description = "A short description"
readme = "README.md"
requires-python = ">=3.7"
authors = [
    {{name = "Your Name", email = "your.email@example.com"}}
]
dependencies = [
    # åœ¨è¿™é‡Œæ·»åŠ ä¾èµ–
]

[project.optional-dependencies]
dev = [
    "pytest",
    "black",
    "flake8", 
    "mypy"
]

[tool.black]
line-length = 88
target-version = ['py37']

[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = ["test_*.py"]
python_classes = ["Test*"]
python_functions = ["test_*"]
'''
    
    def _create_venv(self, project_path: Path, python_version: str):
        """åˆ›å»ºvenvè™šæ‹Ÿç¯å¢ƒ"""
        venv_path = project_path / "venv"
        
        import subprocess
        import sys
        
        command = [sys.executable, '-m', 'venv', str(venv_path)]
        subprocess.run(command, check=True)
        
        print(f"è™šæ‹Ÿç¯å¢ƒåˆ›å»ºæˆåŠŸ: {venv_path}")
    
    def _create_conda_env(self, project_name: str, python_version: str):
        """åˆ›å»ºcondaç¯å¢ƒ"""
        import subprocess
        
        command = [
            'conda', 'create', '-n', f"{project_name}_env",
            f'python={python_version}', '-y'
        ]
        subprocess.run(command, check=True)
        
        print(f"Condaç¯å¢ƒåˆ›å»ºæˆåŠŸ: {project_name}_env")
    
    def list_projects(self) -> List[Dict]:
        """åˆ—å‡ºæ‰€æœ‰é¡¹ç›®"""
        projects_info = []
        for name, config in self.projects.items():
            project_path = self.projects_dir / name
            projects_info.append({
                'name': name,
                'description': config.description,
                'python_version': config.python_version,
                'environment_type': config.environment_type,
                'path': str(project_path),
                'exists': project_path.exists(),
                'created_at': config.created_at
            })
        return projects_info
    
    def delete_project(self, name: str, remove_files: bool = False) -> bool:
        """
        åˆ é™¤é¡¹ç›®
        
        Args:
            name: é¡¹ç›®åç§°
            remove_files: æ˜¯å¦åˆ é™¤é¡¹ç›®æ–‡ä»¶
        
        Returns:
            æ˜¯å¦æˆåŠŸåˆ é™¤
        """
        if name not in self.projects:
            print(f"é¡¹ç›® {name} ä¸å­˜åœ¨")
            return False
        
        config = self.projects[name]
        
        # åˆ é™¤è™šæ‹Ÿç¯å¢ƒ
        if config.environment_type == "venv":
            venv_path = self.projects_dir / name / "venv"
            if venv_path.exists():
                shutil.rmtree(venv_path)
        elif config.environment_type == "conda":
            try:
                import subprocess
                subprocess.run([
                    'conda', 'env', 'remove', '-n', f"{name}_env", '-y'
                ], check=True)
            except:
                print(f"åˆ é™¤condaç¯å¢ƒå¤±è´¥: {name}_env")
        
        # åˆ é™¤é¡¹ç›®æ–‡ä»¶
        if remove_files:
            project_path = self.projects_dir / name
            if project_path.exists():
                shutil.rmtree(project_path)
        
        # ä»é…ç½®ä¸­ç§»é™¤
        del self.projects[name]
        self._save_projects()
        
        print(f"é¡¹ç›® {name} åˆ é™¤æˆåŠŸ")
        return True
    
    def get_activation_command(self, name: str) -> str:
        """
        è·å–ç¯å¢ƒæ¿€æ´»å‘½ä»¤
        
        Args:
            name: é¡¹ç›®åç§°
        
        Returns:
            æ¿€æ´»å‘½ä»¤
        """
        if name not in self.projects:
            raise ValueError(f"é¡¹ç›® {name} ä¸å­˜åœ¨")
        
        config = self.projects[name]
        
        if config.environment_type == "venv":
            project_path = self.projects_dir / name
            if os.name == 'nt':  # Windows
                return f"{project_path}\\venv\\Scripts\\activate"
            else:  # Unix/Linux/macOS
                return f"source {project_path}/venv/bin/activate"
        elif config.environment_type == "conda":
            return f"conda activate {name}_env"
        
        return ""

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    manager = ProjectEnvironmentManager()
    
    # åˆ›å»ºæ–°é¡¹ç›®
    try:
        manager.create_project(
            name="data_analysis_project",
            description="æ•°æ®åˆ†æé¡¹ç›®",
            python_version="3.9",
            environment_type="venv"
        )
        print("é¡¹ç›®åˆ›å»ºæˆåŠŸ!")
    except Exception as e:
        print(f"åˆ›å»ºé¡¹ç›®å¤±è´¥: {e}")
    
    # åˆ—å‡ºæ‰€æœ‰é¡¹ç›®
    projects = manager.list_projects()
    print(f"\næ‰¾åˆ° {len(projects)} ä¸ªé¡¹ç›®:")
    for project in projects:
        print(f"  {project['name']}: {project['description']}")
        print(f"    è·¯å¾„: {project['path']}")
        print(f"    Pythonç‰ˆæœ¬: {project['python_version']}")
        print(f"    ç¯å¢ƒç±»å‹: {project['environment_type']}")
        
        # æ˜¾ç¤ºæ¿€æ´»å‘½ä»¤
        try:
            activate_cmd = manager.get_activation_command(project['name'])
            print(f"    æ¿€æ´»å‘½ä»¤: {activate_cmd}")
        except:
            pass
        print()
```

è¿™ä¸ªé¡¹ç›®ç¯å¢ƒç®¡ç†ç³»ç»Ÿå±•ç¤ºäº†ï¼š

1. **ç»Ÿä¸€çš„é¡¹ç›®ç®¡ç†**: æ ‡å‡†åŒ–çš„é¡¹ç›®ç»“æ„å’Œé…ç½®
2. **ç¯å¢ƒéš”ç¦»**: æ¯ä¸ªé¡¹ç›®éƒ½æœ‰ç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒ
3. **ä¾èµ–ç®¡ç†**: è‡ªåŠ¨ç”Ÿæˆrequirementsæ–‡ä»¶å’Œé…ç½®æ–‡ä»¶
4. **è·¨å¹³å°æ”¯æŒ**: åŒæ—¶æ”¯æŒvenvå’Œconda
5. **é¡¹ç›®æ¨¡æ¿**: è‡ªåŠ¨åˆ›å»ºæ ‡å‡†çš„Pythoné¡¹ç›®ç»“æ„

---

## 12.4 é¡¹ç›®ç»„ç»‡ä¸æœ€ä½³å®è·µ

### ğŸ“ æ¦‚å¿µç†è§£ï¼šé¡¹ç›®ç»„ç»‡å°±åƒåŸå¸‚è§„åˆ’

æƒ³è±¡ä½ è¦è§„åˆ’å»ºè®¾ä¸€ä¸ªç°ä»£åŒ–åŸå¸‚ï¼š
- **ç›®å½•ç»“æ„**: å°±åƒåŸå¸‚çš„åŠŸèƒ½åˆ†åŒºï¼Œä½å®…åŒºã€å•†ä¸šåŒºã€å·¥ä¸šåŒºå„å¸å…¶èŒ
- **é…ç½®ç®¡ç†**: å°±åƒåŸå¸‚çš„åŸºç¡€è®¾æ–½ï¼Œæ°´ç”µç½‘ç»œè¦ç»Ÿä¸€è§„åˆ’
- **æ–‡æ¡£ç³»ç»Ÿ**: å°±åƒåŸå¸‚çš„æŒ‡ç¤ºç‰Œå’Œåœ°å›¾ï¼Œè®©äººèƒ½å¿«é€Ÿæ‰¾åˆ°ç›®æ ‡
- **å·¥å…·é›†æˆ**: å°±åƒåŸå¸‚çš„äº¤é€šç³»ç»Ÿï¼Œè¿æ¥å„ä¸ªåŠŸèƒ½åŒºåŸŸ

### ğŸ—ï¸ æ ‡å‡†é¡¹ç›®ç»“æ„

#### 1. Pythoné¡¹ç›®æ ‡å‡†å¸ƒå±€
```
my_project/
â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ LICENSE                   # è®¸å¯è¯
â”œâ”€â”€ setup.py                  # å®‰è£…é…ç½®
â”œâ”€â”€ pyproject.toml           # ç°ä»£Pythoné¡¹ç›®é…ç½®
â”œâ”€â”€ requirements.txt         # ç”Ÿäº§ä¾èµ–
â”œâ”€â”€ requirements-dev.txt     # å¼€å‘ä¾èµ–
â”œâ”€â”€ .gitignore              # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ .env                    # ç¯å¢ƒå˜é‡
â”œâ”€â”€ Makefile                # è‡ªåŠ¨åŒ–è„šæœ¬
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â””â”€â”€ my_project/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ core/
â”‚       â”œâ”€â”€ utils/
â”‚       â””â”€â”€ api/
â”œâ”€â”€ tests/                  # æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ integration/
â”‚   â””â”€â”€ fixtures/
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â”‚   â”œâ”€â”€ source/
â”‚   â””â”€â”€ build/
â”œâ”€â”€ scripts/                # è„šæœ¬æ–‡ä»¶
â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/                   # æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ raw/
â”‚   â”œâ”€â”€ processed/
â”‚   â””â”€â”€ external/
â”œâ”€â”€ logs/                   # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ venv/                   # è™šæ‹Ÿç¯å¢ƒ
â””â”€â”€ .vscode/               # IDEé…ç½®
```

#### 2. é¡¹ç›®ç»“æ„ç”Ÿæˆå™¨
```python
# project_generator.py
"""Pythoné¡¹ç›®ç»“æ„ç”Ÿæˆå™¨"""

import os
from pathlib import Path
from typing import Dict, List
from datetime import datetime

class ProjectGenerator:
    """é¡¹ç›®ç»“æ„ç”Ÿæˆå™¨"""
    
    def __init__(self):
        """åˆå§‹åŒ–é¡¹ç›®ç”Ÿæˆå™¨"""
        self.templates = self._load_templates()
    
    def create_project(self, name: str, project_type: str = "standard", 
                      author: str = "Your Name", email: str = "your.email@example.com"):
        """
        åˆ›å»ºé¡¹ç›®ç»“æ„
        
        Args:
            name: é¡¹ç›®åç§°
            project_type: é¡¹ç›®ç±»å‹ (standard, web, data_science, cli)
            author: ä½œè€…åç§°
            email: ä½œè€…é‚®ç®±
        """
        project_path = Path(name)
        
        if project_path.exists():
            raise ValueError(f"é¡¹ç›®ç›®å½• {name} å·²å­˜åœ¨")
        
        # åˆ›å»ºç›®å½•ç»“æ„
        self._create_directories(project_path, project_type)
        
        # åˆ›å»ºé…ç½®æ–‡ä»¶
        self._create_config_files(project_path, name, author, email, project_type)
        
        # åˆ›å»ºä»£ç æ¨¡æ¿
        self._create_code_templates(project_path, name, project_type)
        
        print(f"âœ… é¡¹ç›® {name} åˆ›å»ºæˆåŠŸ!")
        print(f"ğŸ“ é¡¹ç›®è·¯å¾„: {project_path.absolute()}")
        
        # æ˜¾ç¤ºä¸‹ä¸€æ­¥æ“ä½œ
        self._show_next_steps(name)
    
    def _create_directories(self, project_path: Path, project_type: str):
        """åˆ›å»ºç›®å½•ç»“æ„"""
        # é€šç”¨ç›®å½•
        common_dirs = [
            "src",
            "tests",
            "docs",
            "config",
            "scripts",
            "logs"
        ]
        
        # ç‰¹å®šç±»å‹çš„ç›®å½•
        type_specific_dirs = {
            "data_science": ["data/raw", "data/processed", "data/external", 
                           "notebooks", "models", "reports"],
            "web": ["static", "templates", "migrations"],
            "cli": ["bin"],
            "standard": []
        }
        
        all_dirs = common_dirs + type_specific_dirs.get(project_type, [])
        
        for dir_path in all_dirs:
            full_path = project_path / dir_path
            full_path.mkdir(parents=True, exist_ok=True)
            
            # åˆ›å»º__init__.pyæ–‡ä»¶
            if dir_path.startswith("src") or dir_path.startswith("tests"):
                init_file = full_path / "__init__.py"
                if not init_file.exists():
                    init_file.touch()
    
    def _create_config_files(self, project_path: Path, name: str, 
                           author: str, email: str, project_type: str):
        """åˆ›å»ºé…ç½®æ–‡ä»¶"""
        config_files = {
            "README.md": self._get_readme_template(name, project_type),
            "requirements.txt": self._get_requirements_template(project_type),
            "requirements-dev.txt": self._get_dev_requirements_template(),
            ".gitignore": self._get_gitignore_template(),
            "setup.py": self._get_setup_py_template(name, author, email),
            "pyproject.toml": self._get_pyproject_toml_template(name, author, email),
            "Makefile": self._get_makefile_template(name),
            ".env.example": self._get_env_template(project_type),
            "LICENSE": self._get_license_template(author),
        }
        
        for filename, content in config_files.items():
            file_path = project_path / filename
            with open(file_path, 'w', encoding='utf-8') as f:
                f.write(content)
    
    def _create_code_templates(self, project_path: Path, name: str, project_type: str):
        """åˆ›å»ºä»£ç æ¨¡æ¿"""
        # åˆ›å»ºä¸»æ¨¡å—
        main_module_path = project_path / "src" / name
        main_module_path.mkdir(parents=True, exist_ok=True)
        
        # __init__.py
        init_content = f'''"""
{name} - Pythoné¡¹ç›®

{self._get_project_description(project_type)}
"""

__version__ = "0.1.0"
__author__ = "Your Name"
'''
        
        with open(main_module_path / "__init__.py", 'w', encoding='utf-8') as f:
            f.write(init_content)
        
        # main.py
        main_content = self._get_main_py_template(name, project_type)
        with open(main_module_path / "main.py", 'w', encoding='utf-8') as f:
            f.write(main_content)
        
        # åˆ›å»ºæµ‹è¯•æ–‡ä»¶
        test_content = self._get_test_template(name)
        test_path = project_path / "tests" / f"test_{name}.py"
        with open(test_path, 'w', encoding='utf-8') as f:
            f.write(test_content)
    
    def _get_readme_template(self, name: str, project_type: str) -> str:
        """è·å–READMEæ¨¡æ¿"""
        return f'''# {name}

{self._get_project_description(project_type)}

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
venv\\Scripts\\activate
# Linux/macOS
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements-dev.txt
```

### è¿è¡Œé¡¹ç›®

```bash
python -m src.{name}.main
```

### è¿è¡Œæµ‹è¯•

```bash
pytest tests/
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
{name}/
â”œâ”€â”€ src/{name}/          # ä¸»è¦æºä»£ç 
â”œâ”€â”€ tests/              # æµ‹è¯•ä»£ç 
â”œâ”€â”€ docs/               # æ–‡æ¡£
â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”œâ”€â”€ scripts/            # è„šæœ¬æ–‡ä»¶
â””â”€â”€ requirements.txt    # ä¾èµ–åˆ—è¡¨
```

## ğŸ› ï¸ å¼€å‘

### ä»£ç æ ¼å¼åŒ–

```bash
black src/ tests/
```

### ä»£ç æ£€æŸ¥

```bash
flake8 src/ tests/
mypy src/
```

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ LICENSE æ–‡ä»¶

## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request!
'''
    
    def _get_project_description(self, project_type: str) -> str:
        """è·å–é¡¹ç›®æè¿°"""
        descriptions = {
            "standard": "ä¸€ä¸ªæ ‡å‡†çš„Pythoné¡¹ç›®",
            "web": "ä¸€ä¸ªWebåº”ç”¨é¡¹ç›®",
            "data_science": "ä¸€ä¸ªæ•°æ®ç§‘å­¦é¡¹ç›®",
            "cli": "ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·é¡¹ç›®"
        }
        return descriptions.get(project_type, "ä¸€ä¸ªPythoné¡¹ç›®")
    
    def _get_requirements_template(self, project_type: str) -> str:
        """è·å–requirementsæ¨¡æ¿"""
        common_deps = [
            "# ç”Ÿäº§ä¾èµ–",
            "click>=8.0.0  # å‘½ä»¤è¡Œç•Œé¢",
            "python-dotenv>=0.19.0  # ç¯å¢ƒå˜é‡ç®¡ç†",
        ]
        
        type_specific_deps = {
            "web": [
                "flask>=2.0.0  # Webæ¡†æ¶",
                "gunicorn>=20.0.0  # WSGIæœåŠ¡å™¨"
            ],
            "data_science": [
                "pandas>=1.3.0  # æ•°æ®åˆ†æ",
                "numpy>=1.20.0  # æ•°å€¼è®¡ç®—",
                "matplotlib>=3.4.0  # æ•°æ®å¯è§†åŒ–",
                "jupyter>=1.0.0  # Jupyterç¬”è®°æœ¬"
            ],
            "cli": [
                "rich>=10.0.0  # å¯Œæ–‡æœ¬ç»ˆç«¯"
            ]
        }
        
        deps = common_deps + type_specific_deps.get(project_type, [])
        return "\n".join(deps) + "\n"
    
    def _get_dev_requirements_template(self) -> str:
        """è·å–å¼€å‘ä¾èµ–æ¨¡æ¿"""
        return """# å¼€å‘ä¾èµ–
-r requirements.txt

# æµ‹è¯•
pytest>=6.0.0
pytest-cov>=2.12.0
pytest-mock>=3.6.0

# ä»£ç è´¨é‡
black>=21.0.0
flake8>=3.9.0
mypy>=0.910
isort>=5.9.0

# æ–‡æ¡£
sphinx>=4.0.0
sphinx-rtd-theme>=0.5.0

# å·¥å…·
pre-commit>=2.15.0
tox>=3.24.0
"""
    
    def _get_gitignore_template(self) -> str:
        """è·å–.gitignoreæ¨¡æ¿"""
        return """# Byte-compiled / optimized / DLL files
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg
MANIFEST

# Virtual Environment
venv/
env/
ENV/

# IDE
.vscode/
.idea/
*.swp
*.swo

# OS
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# Project specific
logs/
data/raw/
*.db
*.sqlite
"""
    
    def _get_setup_py_template(self, name: str, author: str, email: str) -> str:
        """è·å–setup.pyæ¨¡æ¿"""
        return f'''from setuptools import setup, find_packages

with open("README.md", "r", encoding="utf-8") as fh:
    long_description = fh.read()

with open("requirements.txt", "r", encoding="utf-8") as fh:
    requirements = [line.strip() for line in fh if line.strip() and not line.startswith("#")]

setup(
    name="{name}",
    version="0.1.0",
    author="{author}",
    author_email="{email}",
    description="A short description",
    long_description=long_description,
    long_description_content_type="text/markdown",
    url="https://github.com/yourusername/{name}",
    packages=find_packages(where="src"),
    package_dir={{"": "src"}},
    classifiers=[
        "Development Status :: 3 - Alpha",
        "Intended Audience :: Developers",
        "License :: OSI Approved :: MIT License",
        "Operating System :: OS Independent",
        "Programming Language :: Python :: 3",
        "Programming Language :: Python :: 3.7",
        "Programming Language :: Python :: 3.8",
        "Programming Language :: Python :: 3.9",
        "Programming Language :: Python :: 3.10",
    ],
    python_requires=">=3.7",
    install_requires=requirements,
    extras_require={{
        "dev": [
            "pytest>=6.0.0",
            "black>=21.0.0",
            "flake8>=3.9.0",
            "mypy>=0.910",
        ],
    }},
    entry_points={{
        "console_scripts": [
            "{name}={name}.main:main",
        ],
    }},
)
'''
    
    def _get_main_py_template(self, name: str, project_type: str) -> str:
        """è·å–main.pyæ¨¡æ¿"""
        if project_type == "cli":
            return f'''#!/usr/bin/env python3
"""
{name} - å‘½ä»¤è¡Œå·¥å…·

ä½¿ç”¨ç¤ºä¾‹:
    python -m {name}.main --help
"""

import click
from . import __version__

@click.command()
@click.version_option(version=__version__)
@click.option('--verbose', '-v', is_flag=True, help='è¯¦ç»†è¾“å‡º')
def main(verbose):
    """
    {name} å‘½ä»¤è¡Œå·¥å…·
    """
    if verbose:
        click.echo(f"ğŸš€ {name} v{{__version__}} å¯åŠ¨ä¸­...")
    
    click.echo("Hello, World!")
    
    if verbose:
        click.echo("âœ… æ‰§è¡Œå®Œæˆ")

if __name__ == "__main__":
    main()
'''
        else:
            return f'''#!/usr/bin/env python3
"""
{name} ä¸»ç¨‹åº

è¿™æ˜¯é¡¹ç›®çš„å…¥å£ç‚¹ã€‚
"""

import logging
from . import __version__

# é…ç½®æ—¥å¿—
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)

logger = logging.getLogger(__name__)

def main():
    """ä¸»å‡½æ•°"""
    logger.info(f"ğŸš€ {name} v{{__version__}} å¯åŠ¨")
    
    # åœ¨è¿™é‡Œæ·»åŠ ä½ çš„ä¸»è¦é€»è¾‘
    print("Hello, World!")
    
    logger.info("âœ… ç¨‹åºæ‰§è¡Œå®Œæˆ")

if __name__ == "__main__":
    main()
```

### ğŸ”§ é…ç½®ç®¡ç†æœ€ä½³å®è·µ

#### 1. ç¯å¢ƒå˜é‡ç®¡ç†
```python
# config/settings.py
"""é¡¹ç›®é…ç½®ç®¡ç†"""

import os
from pathlib import Path
from typing import Optional
from dotenv import load_dotenv

# åŠ è½½ç¯å¢ƒå˜é‡
load_dotenv()

class Config:
    """åŸºç¡€é…ç½®ç±»"""
    
    # é¡¹ç›®åŸºç¡€ä¿¡æ¯
    PROJECT_NAME = "my_project"
    VERSION = "1.0.0"
    DEBUG = os.getenv("DEBUG", "False").lower() == "true"
    
    # è·¯å¾„é…ç½®
    BASE_DIR = Path(__file__).parent.parent
    DATA_DIR = BASE_DIR / "data"
    LOGS_DIR = BASE_DIR / "logs"
    
    # æ•°æ®åº“é…ç½®
    DATABASE_URL = os.getenv("DATABASE_URL", "sqlite:///app.db")
    
    # APIé…ç½®
    API_HOST = os.getenv("API_HOST", "localhost")
    API_PORT = int(os.getenv("API_PORT", "8000"))
    SECRET_KEY = os.getenv("SECRET_KEY", "your-secret-key-here")
    
    # æ—¥å¿—é…ç½®
    LOG_LEVEL = os.getenv("LOG_LEVEL", "INFO")
    LOG_FILE = LOGS_DIR / "app.log"
    
    # å¤–éƒ¨æœåŠ¡é…ç½®
    REDIS_URL = os.getenv("REDIS_URL", "redis://localhost:6379/0")
    EMAIL_HOST = os.getenv("EMAIL_HOST")
    EMAIL_PORT = int(os.getenv("EMAIL_PORT", "587"))
    EMAIL_USER = os.getenv("EMAIL_USER")
    EMAIL_PASSWORD = os.getenv("EMAIL_PASSWORD")
    
    @classmethod
    def validate(cls):
        """éªŒè¯é…ç½®"""
        required_vars = ["SECRET_KEY"]
        missing_vars = [var for var in required_vars if not getattr(cls, var)]
        
        if missing_vars:
            raise ValueError(f"ç¼ºå°‘å¿…éœ€çš„ç¯å¢ƒå˜é‡: {', '.join(missing_vars)}")
        
        # åˆ›å»ºå¿…è¦çš„ç›®å½•
        cls.DATA_DIR.mkdir(exist_ok=True)
        cls.LOGS_DIR.mkdir(exist_ok=True)

class DevelopmentConfig(Config):
    """å¼€å‘ç¯å¢ƒé…ç½®"""
    DEBUG = True
    DATABASE_URL = os.getenv("DEV_DATABASE_URL", "sqlite:///dev.db")

class ProductionConfig(Config):
    """ç”Ÿäº§ç¯å¢ƒé…ç½®"""
    DEBUG = False
    LOG_LEVEL = "WARNING"

class TestingConfig(Config):
    """æµ‹è¯•ç¯å¢ƒé…ç½®"""
    TESTING = True
    DATABASE_URL = "sqlite:///:memory:"

# é…ç½®æ˜ å°„
config_map = {
    "development": DevelopmentConfig,
    "production": ProductionConfig,
    "testing": TestingConfig,
}

def get_config(env: Optional[str] = None) -> Config:
    """è·å–é…ç½®å¯¹è±¡"""
    if env is None:
        env = os.getenv("FLASK_ENV", "development")
    
    config_class = config_map.get(env, DevelopmentConfig)
    config = config_class()
    config.validate()
    
    return config

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    config = get_config()
    print(f"é¡¹ç›®: {config.PROJECT_NAME}")
    print(f"è°ƒè¯•æ¨¡å¼: {config.DEBUG}")
    print(f"æ•°æ®åº“: {config.DATABASE_URL}")
```

### ğŸ“š æœ¬ç« æ€»ç»“

é€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å…¨é¢æŒæ¡äº†Pythonæ¨¡å—ä¸åŒ…ç®¡ç†çš„æ ¸å¿ƒæŠ€èƒ½ï¼š

#### ğŸ¯ æ ¸å¿ƒçŸ¥è¯†ç‚¹å›é¡¾

1. **æ¨¡å—ç³»ç»Ÿç†è§£**
   - æ¨¡å—vsè„šæœ¬çš„åŒºåˆ«
   - å¯¼å…¥æœºåˆ¶å’Œå‘½åç©ºé—´
   - æ¨¡å—æœç´¢è·¯å¾„å’Œ__name__å˜é‡

2. **è‡ªå®šä¹‰æ¨¡å—è®¾è®¡**
   - å•ä¸€èŒè´£åŸåˆ™
   - æ¸…æ™°çš„APIè®¾è®¡
   - å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ–‡æ¡£

3. **åŒ…ç®¡ç†æŠ€èƒ½**
   - pipé«˜çº§ç”¨æ³•å’Œrequirementsç®¡ç†
   - è™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œç®¡ç†
   - ä¾èµ–ç‰ˆæœ¬æ§åˆ¶å’Œå†²çªè§£å†³

4. **é¡¹ç›®ç»„ç»‡æœ€ä½³å®è·µ**
   - æ ‡å‡†é¡¹ç›®ç»“æ„è®¾è®¡
   - é…ç½®ç®¡ç†å’Œç¯å¢ƒå˜é‡
   - è‡ªåŠ¨åŒ–å·¥å…·é›†æˆ

#### ğŸ† å­¦ä¹ æˆæœæ€»ç»“

âœ… **æŠ€èƒ½æŒæ¡åº¦è¯„ä¼°**
- **æ¨¡å—åŒ–ç¼–ç¨‹**: â­â­â­â­â­ (5æ˜Ÿ)
- **åŒ…ç®¡ç†å·¥å…·**: â­â­â­â­â­ (5æ˜Ÿ)  
- **é¡¹ç›®ç»„ç»‡**: â­â­â­â­â­ (5æ˜Ÿ)
- **æœ€ä½³å®è·µ**: â­â­â­â­â­ (5æ˜Ÿ)

âœ… **å®æˆ˜é¡¹ç›®å®Œæˆ**
- æ¨¡å—åŒ–è®¡ç®—å™¨ç³»ç»Ÿ (300+ è¡Œä»£ç )
- æ•°æ®å¤„ç†å·¥å…·åŒ… (500+ è¡Œä»£ç )
- é¡¹ç›®ç¯å¢ƒç®¡ç†ç³»ç»Ÿ (400+ è¡Œä»£ç )
- é¡¹ç›®ç»“æ„ç”Ÿæˆå™¨ (200+ è¡Œä»£ç )

âœ… **ä¼ä¸šçº§æŠ€èƒ½**
- å¤§å‹é¡¹ç›®çš„æ¨¡å—åŒ–è®¾è®¡
- å›¢é˜Ÿåä½œçš„åŒ…ç®¡ç†è§„èŒƒ
- æŒç»­é›†æˆçš„ç¯å¢ƒé…ç½®
- è·¨å¹³å°çš„éƒ¨ç½²æ–¹æ¡ˆ

#### ğŸš€ è¿›é˜¶å­¦ä¹ æ–¹å‘

1. **åŒ…å‘å¸ƒä¸åˆ†å‘**
   - PyPIåŒ…å‘å¸ƒæµç¨‹
   - ç‰ˆæœ¬ç®¡ç†å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬
   - æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ

2. **é«˜çº§é¡¹ç›®ç®¡ç†**
   - Dockerå®¹å™¨åŒ–éƒ¨ç½²
   - CI/CDæµæ°´çº¿é…ç½®
   - ä»£ç è´¨é‡æ£€æŸ¥å·¥å…·

3. **æ€§èƒ½ä¼˜åŒ–**
   - æ¨¡å—åŠ è½½ä¼˜åŒ–
   - ä¾èµ–åˆ†æå’Œç²¾ç®€
   - æ‰“åŒ…ä¼˜åŒ–ç­–ç•¥

#### ğŸ’¡ æœ€ä½³å®è·µæ€»ç»“

1. **æ¨¡å—è®¾è®¡åŸåˆ™**
   - å•ä¸€èŒè´£ï¼Œé«˜å†…èšä½è€¦åˆ
   - æ¸…æ™°çš„å‘½åå’Œå®Œæ•´çš„æ–‡æ¡£
   - åˆç†çš„é”™è¯¯å¤„ç†å’Œç±»å‹æ³¨è§£

2. **åŒ…ç®¡ç†è§„èŒƒ**
   - ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒéš”ç¦»é¡¹ç›®
   - ç²¾ç¡®æŒ‡å®šä¾èµ–ç‰ˆæœ¬
   - åˆ†ç¦»ç”Ÿäº§å’Œå¼€å‘ä¾èµ–

3. **é¡¹ç›®ç»„ç»‡æ ‡å‡†**
   - é‡‡ç”¨æ ‡å‡†çš„ç›®å½•ç»“æ„
   - é…ç½®æ–‡ä»¶ç»Ÿä¸€ç®¡ç†
   - è‡ªåŠ¨åŒ–æµ‹è¯•å’Œéƒ¨ç½²

#### ğŸ“ ä¸‹ä¸€ç« é¢„å‘Š

ç¬¬13ç« å°†å­¦ä¹ **æ–‡ä»¶æ“ä½œä¸æ•°æ®æŒä¹…åŒ–**ï¼ŒåŒ…æ‹¬ï¼š
- æ–‡ä»¶è¯»å†™çš„é«˜çº§æŠ€å·§
- æ•°æ®åºåˆ—åŒ–ä¸ååºåˆ—åŒ–
- æ•°æ®åº“æ“ä½œå’ŒORMä½¿ç”¨
- å¤§æ–‡ä»¶å¤„ç†å’Œæµå¼æ“ä½œ

æ¨¡å—åŒ–ç¼–ç¨‹æ˜¯Pythonå¼€å‘çš„åŸºçŸ³ï¼ŒæŒæ¡äº†è¿™äº›æŠ€èƒ½ï¼Œä½ å°±å…·å¤‡äº†æ„å»ºå¤§å‹ã€å¯ç»´æŠ¤Pythonåº”ç”¨çš„èƒ½åŠ›ï¼

---

**ç« èŠ‚å®Œæˆæƒ…å†µ**: âœ… 100%å®Œæˆ  
**ä»£ç ç¤ºä¾‹**: 1400+ è¡Œé«˜è´¨é‡ä»£ç   
**çŸ¥è¯†ç‚¹è¦†ç›–**: æ¨¡å—ç³»ç»Ÿã€åŒ…ç®¡ç†ã€è™šæ‹Ÿç¯å¢ƒã€é¡¹ç›®ç»„ç»‡  
**å®æˆ˜é¡¹ç›®**: 4ä¸ªå®Œæ•´çš„ä¼ä¸šçº§åº”ç”¨ç¤ºä¾‹  
**å­¦ä¹ æ—¶é•¿**: é¢„è®¡6-8å°æ—¶æŒæ¡æ ¸å¿ƒå†…å®¹

ğŸ‰ æ­å–œä½ å®Œæˆäº†ç¬¬12ç« çš„å­¦ä¹ ï¼ç°åœ¨ä½ å·²ç»æŒæ¡äº†Pythonæ¨¡å—ä¸åŒ…ç®¡ç†çš„æ ¸å¿ƒæŠ€èƒ½ï¼Œå¯ä»¥å¼€å§‹æ„å»ºå¤§å‹ã€å¯ç»´æŠ¤çš„Pythonåº”ç”¨äº†ï¼ç»§ç»­åŠ æ²¹ï¼Œä¸æ–­å­¦ä¹ å’Œå®è·µï¼Œä½ å°†èƒ½å¤Ÿæˆä¸ºä¸€åä¼˜ç§€çš„Pythonå¼€å‘è€…ï¼

--- 